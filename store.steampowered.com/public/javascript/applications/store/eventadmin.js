/**** (c) Valve Corporation. Use is governed by the terms of the Steam Subscriber Agreement http://store.steampowered.com/subscriber_agreement/.
 ****/
(self.webpackChunkstore = self.webpackChunkstore || []).push([
  [970],
  {
    61311: (e) => {
      e.exports = {
        ModeratorAuditActionCtn: "f6z__AuHw6SOG9zsY2oKr",
        ExpandModActions: "_3nNMeqxuySIiNcmt7YEXb7",
      };
    },
    12037: (e) => {
      e.exports = {
        "duration-app-launch": "800ms",
        Container: "_2Jd3MGaOu0C9Ydswf8Q4Tn",
        StoreHeaderAdjust: "_3YyCpH32HRhZtt4BOM5wM5",
        SectionButtonCtn: "_1HP0yfVUrZ-TPBYhiQkye2",
        SectionButton: "_3n8swQFM3I_ARVM_5bPhAs",
        EventsSummariesCtn: "_1snIw0RvJduvDtqpmwtKJ9",
        LatestUpdateButtonCtn: "_2vEwZPNBe2qcTuxZf5cpiD",
        LatestUpdateIcon: "mq3ROvmcn5_HdCKG6JXDa",
        LatestUpdateButton: "_1TRFtE8IfXpDQ_loHnB_bU",
      };
    },
    71909: (e) => {
      e.exports = {
        Ctn: "_1cSpOjJvmGfNyu_HSwichZ",
        RssInput: "_8NQ9LUIbLO71H08qAYXDd",
        PreviewListCtn: "HRcOMhFkaVvhc6JpjMSNL",
        PostCtn: "_3MI2hkWsuzXcyDAibpwe7B",
        PostTitle: "_1ZsnsCKJmsJuCu04nd93lM",
        ActivePost: "h-qBFnVYUuO1I4P-cSkTz",
        PostDate: "_2vXmupKkh6p2BaA0K6CB5O",
        ErrorPost: "aBLy2PQkdVwQn6JBG8BN8",
        PostDraft: "_10_gLIbT6bnwWVSfTW2WSX",
        PostStaged: "nNzd6ujTYg6p9F7pRvFWy",
        PreviewListBtn: "_3NT8sO_AexM1KIu_MODBhK",
        PreviewButtons: "_3lbycruUbHtprPAsZH1xvl",
        UrlSettingCtn: "iN4AtnUn7apNTMq-bbs1m",
        Error: "_1ZZ510SPBPFH5AkrGEHFfu",
        DialogPostTitle: "_1XamDYGOmN-CAK2C5na9a5",
        DashboardBtn: "_2Hlrm7BUntwygz545o3zQI",
        RawRSS: "_2mOAhPzeuYmAf5zGBOdp7F",
        ButtonCtn: "_13jSBmDO_a-9t1cIUiiQGm",
        PreviewBtn: "_3HssDlgWiXjyOyu8qdcc-K",
        ViewRaw: "_2jvHrB2MnyHMk3_BUfXjgt",
        LanguageRow: "g_9tLawSDdTk6NiUPTRzd",
        LanguageTitle: "_2jkBiax2j-5uGiCq-TfyS0",
        LanguageSet: "_2zsMrGyxcvlo1yieM1i0d8",
      };
    },
    52081: (e) => {
      e.exports = {
        SectionContainer: "_3P-ffy_ncZSHdpLyO6f0qi",
        ModSectionTitle: "_2lc8mXoJp_A_p2dgalucda",
        ResizeButton: "_29RNNuE5kdZltMEtl37JLr",
        TileContainer: "_2D4XHyOtJNCevYR8usMUTn",
        CreatorCtn: "GKustVJ6kwH-yfSnQEsoc",
        TileSpread: "_1s_ElWG5sLvC6jn5bmx5lY",
      };
    },
    45559: (e) => {
      e.exports = { Error: "_1eWgIJNhXTPC8_jGAIqKPo" };
    },
    961: (e) => {
      e.exports = {
        AnalysisCtn: "_1YGfWUDh8ed60wRQsWWNIF",
        AnalysisMissing: "rH1DtJyqgJLBkBSxST7Pr",
        ModerationContainer: "_4HRKpSC9YY7qtf41FvW0t",
        FilterContainer: "qY07Ts46PtC9f_CkGYbuw",
        Tile: "_3oU1yN2Yb-ZuT2P5rHAev9",
        DetailsMiddle: "VcJpZMvg6yg6gvjet_lOL",
        EventModerateMarkReview: "_1RqKA7hTv6bcBGrMlmJBgz",
        EventModerateMarkReReview: "qd-K7NHXOsYzDV3efizgo",
        HalloweenEvent: "_34-bq70a3KzZ-vVd1v8whZ",
        TileEventOtherType: "_3LUrW7wuVtojLL2n5z-MO5",
        TileCapsule: "_36tP88olexdONuQPMAH7wS",
        NoCapsuleFallback: "_16oQL8__nFx7gB4SyJaXss",
        NoCapsule: "_1onVFUCJL4w1GOc9-5H6Me",
        TileDetails: "_2mRup7CUbcaFul1JHh9EZE",
        DetailsLeft: "_1O0y5744ePZj3bJR1znj1i",
        EventTitle: "_3ahHdkXDTdAX8N8qrlTO2A",
        DetailsRight: "_2BaxWyhld4ybAPEQ6OWPMr",
        ArtHeader: "_38IkFA1-NC1J4Nksi3nRFA",
        ArtSpotlight: "_2oUPYZHA2_Ta4GuTcTZbgd",
        ModeratedFlagCtn: "_2JGGc489-CEXdtyThZ-oQB",
        TitleLink: "_1OG__rbIbfwvZHVxRtcncy",
        TileAppInfo: "_2IJ__vdWVbYb-buHnhzfnA",
        TileAppInfoTitle: "_2X75q8B3vbGNtefxcW3jV7",
        TileAppInfoImage: "_1rVmL1div0uHwyMqwlJixh",
        TileSplit: "aaFuCFgI5Fl32h2pWEEfN",
        TileTitle: "yJw1iGP3a49nfGpsJLTX",
        TimeWidth: "xSOgV1OP-kC1LOJB_U6Lh",
        CategoryChangeDialog: "_1VSAjVr5FVxM5XYWbK0drT",
        Button: "wu9KrcTvKBuVbK28hlB7O",
        RightSideTitles: "XDAwDPCqcUwPgADyyo1I3",
        DateAndTime: "_2cW9NG6Q7uWRVnhAwe3juu",
        StoreHeaderAdjust: "_3U7jaAVOEBb0gDtFK1AkVR",
        LastUpdateTime: "_2x7zHBXixihuRXX3Rjt_0s",
        EventTimingBlock: "_31d_RSG49SZFyfID3s5Z4G",
        TileEventType: "_1z1xtCOtqCzGGGDRR-dRFr",
        ChannelInfo: "H__RKLMfFToIYF83TuW3k",
        HasAdultContent: "_2PcmCd2KPADlMtBUq-mAxi",
      };
    },
    89241: (e, t, n) => {
      "use strict";
      n.d(t, { A: () => D });
      var a,
        r = n(34629),
        s = n(41735),
        i = n.n(s),
        o = n(14947),
        l = n(78327),
        c = n(72034),
        d = n(56545),
        m = n(80613),
        u = n.n(m),
        p = n(89068);
      class g extends m.Message {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            g.prototype.gid || p.Sg(g.M()),
            m.Message.initialize(this, e, 0, -1, [5], null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            g.sm_m ||
              (g.sm_m = {
                proto: g,
                fields: {
                  gid: {
                    n: 1,
                    br: p.qM.readFixed64String,
                    bw: p.gp.writeFixed64String,
                  },
                  name: { n: 2, br: p.qM.readString, bw: p.gp.writeString },
                  type: {
                    n: 3,
                    d: 0,
                    br: p.qM.readUint32,
                    bw: p.gp.writeUint32,
                  },
                  url: { n: 4, br: p.qM.readString, bw: p.gp.writeString },
                  associated_apps: {
                    n: 5,
                    r: !0,
                    q: !0,
                    br: p.qM.readUint32,
                    pbr: p.qM.readPackedUint32,
                    bw: p.gp.writeRepeatedUint32,
                  },
                  poll_interval: {
                    n: 6,
                    d: 300,
                    br: p.qM.readUint32,
                    bw: p.gp.writeUint32,
                  },
                  kv_description: {
                    n: 7,
                    br: p.qM.readString,
                    bw: p.gp.writeString,
                  },
                  kv_filter: {
                    n: 8,
                    br: p.qM.readString,
                    bw: p.gp.writeString,
                  },
                  publish_to_clan_account_id: {
                    n: 9,
                    br: p.qM.readUint32,
                    bw: p.gp.writeUint32,
                  },
                  language: {
                    n: 10,
                    br: p.qM.readUint32,
                    bw: p.gp.writeUint32,
                  },
                  last_error: {
                    n: 11,
                    br: p.qM.readUint32,
                    bw: p.gp.writeUint32,
                  },
                  last_update: {
                    n: 12,
                    br: p.qM.readUint32,
                    bw: p.gp.writeUint32,
                  },
                  last_checked: {
                    n: 13,
                    br: p.qM.readUint32,
                    bw: p.gp.writeUint32,
                  },
                },
              }),
            g.sm_m
          );
        }
        static MBF() {
          return g.sm_mbf || (g.sm_mbf = p.w0(g.M())), g.sm_mbf;
        }
        toObject(e = !1) {
          return g.toObject(e, this);
        }
        static toObject(e, t) {
          return p.BT(g.M(), e, t);
        }
        static fromObject(e) {
          return p.Uq(g.M(), e);
        }
        static deserializeBinary(e) {
          let t = new (u().BinaryReader)(e),
            n = new g();
          return g.deserializeBinaryFromReader(n, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return p.zj(g.MBF(), e, t);
        }
        serializeBinary() {
          var e = new (u().BinaryWriter)();
          return g.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          p.i0(g.M(), e, t);
        }
        serializeBase64String() {
          var e = new (u().BinaryWriter)();
          return g.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CNewsFeedDef";
        }
      }
      class _ extends m.Message {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            _.prototype.gid || p.Sg(_.M()),
            m.Message.initialize(this, e, 0, -1, [11], null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            _.sm_m ||
              (_.sm_m = {
                proto: _,
                fields: {
                  gid: {
                    n: 1,
                    br: p.qM.readFixed64String,
                    bw: p.gp.writeFixed64String,
                  },
                  news_feed_gid: {
                    n: 2,
                    br: p.qM.readFixed64String,
                    bw: p.gp.writeFixed64String,
                  },
                  title: { n: 3, br: p.qM.readString, bw: p.gp.writeString },
                  url: { n: 4, br: p.qM.readString, bw: p.gp.writeString },
                  author: { n: 5, br: p.qM.readString, bw: p.gp.writeString },
                  rtime_date: {
                    n: 6,
                    br: p.qM.readUint32,
                    bw: p.gp.writeUint32,
                  },
                  contents: { n: 7, br: p.qM.readString, bw: p.gp.writeString },
                  commited: { n: 8, br: p.qM.readBool, bw: p.gp.writeBool },
                  deleted: { n: 9, br: p.qM.readBool, bw: p.gp.writeBool },
                  tags: { n: 10, br: p.qM.readString, bw: p.gp.writeString },
                  appids: {
                    n: 11,
                    r: !0,
                    q: !0,
                    br: p.qM.readUint32,
                    pbr: p.qM.readPackedUint32,
                    bw: p.gp.writeRepeatedUint32,
                  },
                  recommendation_state: {
                    n: 12,
                    br: p.qM.readEnum,
                    bw: p.gp.writeEnum,
                  },
                  received_compensation: {
                    n: 13,
                    br: p.qM.readBool,
                    bw: p.gp.writeBool,
                  },
                  received_for_free: {
                    n: 14,
                    br: p.qM.readBool,
                    bw: p.gp.writeBool,
                  },
                  blurb: { n: 15, br: p.qM.readString, bw: p.gp.writeString },
                  event_subtitle: {
                    n: 16,
                    br: p.qM.readString,
                    bw: p.gp.writeString,
                  },
                  event_summary: {
                    n: 17,
                    br: p.qM.readString,
                    bw: p.gp.writeString,
                  },
                },
              }),
            _.sm_m
          );
        }
        static MBF() {
          return _.sm_mbf || (_.sm_mbf = p.w0(_.M())), _.sm_mbf;
        }
        toObject(e = !1) {
          return _.toObject(e, this);
        }
        static toObject(e, t) {
          return p.BT(_.M(), e, t);
        }
        static fromObject(e) {
          return p.Uq(_.M(), e);
        }
        static deserializeBinary(e) {
          let t = new (u().BinaryReader)(e),
            n = new _();
          return _.deserializeBinaryFromReader(n, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return p.zj(_.MBF(), e, t);
        }
        serializeBinary() {
          var e = new (u().BinaryWriter)();
          return _.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          p.i0(_.M(), e, t);
        }
        serializeBase64String() {
          var e = new (u().BinaryWriter)();
          return _.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CNewsFeedPostDef";
        }
      }
      class h extends m.Message {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            h.prototype.content || p.Sg(h.M()),
            m.Message.initialize(this, e, 0, -1, void 0, null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            h.sm_m ||
              (h.sm_m = {
                proto: h,
                fields: {
                  content: { n: 1, br: p.qM.readString, bw: p.gp.writeString },
                  preserve_newlines: {
                    n: 2,
                    d: !1,
                    br: p.qM.readBool,
                    bw: p.gp.writeBool,
                  },
                },
              }),
            h.sm_m
          );
        }
        static MBF() {
          return h.sm_mbf || (h.sm_mbf = p.w0(h.M())), h.sm_mbf;
        }
        toObject(e = !1) {
          return h.toObject(e, this);
        }
        static toObject(e, t) {
          return p.BT(h.M(), e, t);
        }
        static fromObject(e) {
          return p.Uq(h.M(), e);
        }
        static deserializeBinary(e) {
          let t = new (u().BinaryReader)(e),
            n = new h();
          return h.deserializeBinaryFromReader(n, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return p.zj(h.MBF(), e, t);
        }
        serializeBinary() {
          var e = new (u().BinaryWriter)();
          return h.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          p.i0(h.M(), e, t);
        }
        serializeBase64String() {
          var e = new (u().BinaryWriter)();
          return h.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CNews_ConvertHTMLToBBCode_Request";
        }
      }
      class v extends m.Message {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            v.prototype.converted_content || p.Sg(v.M()),
            m.Message.initialize(this, e, 0, -1, void 0, null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            v.sm_m ||
              (v.sm_m = {
                proto: v,
                fields: {
                  converted_content: {
                    n: 1,
                    br: p.qM.readString,
                    bw: p.gp.writeString,
                  },
                  found_html: { n: 2, br: p.qM.readBool, bw: p.gp.writeBool },
                },
              }),
            v.sm_m
          );
        }
        static MBF() {
          return v.sm_mbf || (v.sm_mbf = p.w0(v.M())), v.sm_mbf;
        }
        toObject(e = !1) {
          return v.toObject(e, this);
        }
        static toObject(e, t) {
          return p.BT(v.M(), e, t);
        }
        static fromObject(e) {
          return p.Uq(v.M(), e);
        }
        static deserializeBinary(e) {
          let t = new (u().BinaryReader)(e),
            n = new v();
          return v.deserializeBinaryFromReader(n, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return p.zj(v.MBF(), e, t);
        }
        serializeBinary() {
          var e = new (u().BinaryWriter)();
          return v.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          p.i0(v.M(), e, t);
        }
        serializeBase64String() {
          var e = new (u().BinaryWriter)();
          return v.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CNews_ConvertHTMLToBBCode_Response";
        }
      }
      class S extends m.Message {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            S.prototype.rss_message || p.Sg(S.M()),
            m.Message.initialize(this, e, 0, -1, void 0, null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            S.sm_m ||
              (S.sm_m = {
                proto: S,
                fields: {
                  rss_message: {
                    n: 1,
                    br: p.qM.readString,
                    bw: p.gp.writeString,
                  },
                  unique_id: {
                    n: 2,
                    br: p.qM.readString,
                    bw: p.gp.writeString,
                  },
                  title: { n: 3, br: p.qM.readString, bw: p.gp.writeString },
                  desc: { n: 4, br: p.qM.readString, bw: p.gp.writeString },
                  jsondata: { n: 5, br: p.qM.readString, bw: p.gp.writeString },
                  post: { n: 6, c: _ },
                  valid_post: { n: 7, br: p.qM.readBool, bw: p.gp.writeBool },
                  post_error_msg: {
                    n: 8,
                    br: p.qM.readString,
                    bw: p.gp.writeString,
                  },
                },
              }),
            S.sm_m
          );
        }
        static MBF() {
          return S.sm_mbf || (S.sm_mbf = p.w0(S.M())), S.sm_mbf;
        }
        toObject(e = !1) {
          return S.toObject(e, this);
        }
        static toObject(e, t) {
          return p.BT(S.M(), e, t);
        }
        static fromObject(e) {
          return p.Uq(S.M(), e);
        }
        static deserializeBinary(e) {
          let t = new (u().BinaryReader)(e),
            n = new S();
          return S.deserializeBinaryFromReader(n, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return p.zj(S.MBF(), e, t);
        }
        serializeBinary() {
          var e = new (u().BinaryWriter)();
          return S.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          p.i0(S.M(), e, t);
        }
        serializeBase64String() {
          var e = new (u().BinaryWriter)();
          return S.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CNewsPartnerEventPreview";
        }
      }
      class E extends m.Message {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            E.prototype.rss_url || p.Sg(E.M()),
            m.Message.initialize(this, e, 0, -1, void 0, null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            E.sm_m ||
              (E.sm_m = {
                proto: E,
                fields: {
                  rss_url: { n: 1, br: p.qM.readString, bw: p.gp.writeString },
                  lang: { n: 2, br: p.qM.readUint32, bw: p.gp.writeUint32 },
                },
              }),
            E.sm_m
          );
        }
        static MBF() {
          return E.sm_mbf || (E.sm_mbf = p.w0(E.M())), E.sm_mbf;
        }
        toObject(e = !1) {
          return E.toObject(e, this);
        }
        static toObject(e, t) {
          return p.BT(E.M(), e, t);
        }
        static fromObject(e) {
          return p.Uq(E.M(), e);
        }
        static deserializeBinary(e) {
          let t = new (u().BinaryReader)(e),
            n = new E();
          return E.deserializeBinaryFromReader(n, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return p.zj(E.MBF(), e, t);
        }
        serializeBinary() {
          var e = new (u().BinaryWriter)();
          return E.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          p.i0(E.M(), e, t);
        }
        serializeBase64String() {
          var e = new (u().BinaryWriter)();
          return E.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CNews_PreviewPartnerEvents_Request";
        }
      }
      class w extends m.Message {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            w.prototype.rss_url || p.Sg(w.M()),
            m.Message.initialize(this, e, 0, -1, [2], null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            w.sm_m ||
              (w.sm_m = {
                proto: w,
                fields: {
                  rss_url: { n: 1, br: p.qM.readString, bw: p.gp.writeString },
                  results: { n: 2, c: S, r: !0, q: !0 },
                  error_msg: {
                    n: 3,
                    br: p.qM.readString,
                    bw: p.gp.writeString,
                  },
                },
              }),
            w.sm_m
          );
        }
        static MBF() {
          return w.sm_mbf || (w.sm_mbf = p.w0(w.M())), w.sm_mbf;
        }
        toObject(e = !1) {
          return w.toObject(e, this);
        }
        static toObject(e, t) {
          return p.BT(w.M(), e, t);
        }
        static fromObject(e) {
          return p.Uq(w.M(), e);
        }
        static deserializeBinary(e) {
          let t = new (u().BinaryReader)(e),
            n = new w();
          return w.deserializeBinaryFromReader(n, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return p.zj(w.MBF(), e, t);
        }
        serializeBinary() {
          var e = new (u().BinaryWriter)();
          return w.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          p.i0(w.M(), e, t);
        }
        serializeBase64String() {
          var e = new (u().BinaryWriter)();
          return w.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CNews_PreviewPartnerEvents_Response";
        }
      }
      class C extends m.Message {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            C.prototype.clan_account_id || p.Sg(C.M()),
            m.Message.initialize(this, e, 0, -1, void 0, null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            C.sm_m ||
              (C.sm_m = {
                proto: C,
                fields: {
                  clan_account_id: {
                    n: 1,
                    br: p.qM.readUint32,
                    bw: p.gp.writeUint32,
                  },
                },
              }),
            C.sm_m
          );
        }
        static MBF() {
          return C.sm_mbf || (C.sm_mbf = p.w0(C.M())), C.sm_mbf;
        }
        toObject(e = !1) {
          return C.toObject(e, this);
        }
        static toObject(e, t) {
          return p.BT(C.M(), e, t);
        }
        static fromObject(e) {
          return p.Uq(C.M(), e);
        }
        static deserializeBinary(e) {
          let t = new (u().BinaryReader)(e),
            n = new C();
          return C.deserializeBinaryFromReader(n, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return p.zj(C.MBF(), e, t);
        }
        serializeBinary() {
          var e = new (u().BinaryWriter)();
          return C.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          p.i0(C.M(), e, t);
        }
        serializeBase64String() {
          var e = new (u().BinaryWriter)();
          return C.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CNews_GetNewsFeedByRepublishClan_Request";
        }
      }
      class b extends m.Message {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            b.prototype.feeds || p.Sg(b.M()),
            m.Message.initialize(this, e, 0, -1, [1], null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            b.sm_m ||
              (b.sm_m = {
                proto: b,
                fields: { feeds: { n: 1, c: g, r: !0, q: !0 } },
              }),
            b.sm_m
          );
        }
        static MBF() {
          return b.sm_mbf || (b.sm_mbf = p.w0(b.M())), b.sm_mbf;
        }
        toObject(e = !1) {
          return b.toObject(e, this);
        }
        static toObject(e, t) {
          return p.BT(b.M(), e, t);
        }
        static fromObject(e) {
          return p.Uq(b.M(), e);
        }
        static deserializeBinary(e) {
          let t = new (u().BinaryReader)(e),
            n = new b();
          return b.deserializeBinaryFromReader(n, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return p.zj(b.MBF(), e, t);
        }
        serializeBinary() {
          var e = new (u().BinaryWriter)();
          return b.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          p.i0(b.M(), e, t);
        }
        serializeBase64String() {
          var e = new (u().BinaryWriter)();
          return b.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CNews_GetNewsFeedByRepublishClan_Response";
        }
      }
      class M extends m.Message {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            M.prototype.post || p.Sg(M.M()),
            m.Message.initialize(this, e, 0, -1, void 0, null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            M.sm_m ||
              (M.sm_m = {
                proto: M,
                fields: {
                  post: { n: 1, c: _ },
                  draft: { n: 2, br: p.qM.readBool, bw: p.gp.writeBool },
                },
              }),
            M.sm_m
          );
        }
        static MBF() {
          return M.sm_mbf || (M.sm_mbf = p.w0(M.M())), M.sm_mbf;
        }
        toObject(e = !1) {
          return M.toObject(e, this);
        }
        static toObject(e, t) {
          return p.BT(M.M(), e, t);
        }
        static fromObject(e) {
          return p.Uq(M.M(), e);
        }
        static deserializeBinary(e) {
          let t = new (u().BinaryReader)(e),
            n = new M();
          return M.deserializeBinaryFromReader(n, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return p.zj(M.MBF(), e, t);
        }
        serializeBinary() {
          var e = new (u().BinaryWriter)();
          return M.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          p.i0(M.M(), e, t);
        }
        serializeBase64String() {
          var e = new (u().BinaryWriter)();
          return M.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CNews_PublishPartnerEvent_Request";
        }
      }
      class A extends m.Message {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            A.prototype.clan_event_gid || p.Sg(A.M()),
            m.Message.initialize(this, e, 0, -1, void 0, null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            A.sm_m ||
              (A.sm_m = {
                proto: A,
                fields: {
                  clan_event_gid: {
                    n: 1,
                    br: p.qM.readFixed64String,
                    bw: p.gp.writeFixed64String,
                  },
                  news_post_gid: {
                    n: 2,
                    br: p.qM.readFixed64String,
                    bw: p.gp.writeFixed64String,
                  },
                },
              }),
            A.sm_m
          );
        }
        static MBF() {
          return A.sm_mbf || (A.sm_mbf = p.w0(A.M())), A.sm_mbf;
        }
        toObject(e = !1) {
          return A.toObject(e, this);
        }
        static toObject(e, t) {
          return p.BT(A.M(), e, t);
        }
        static fromObject(e) {
          return p.Uq(A.M(), e);
        }
        static deserializeBinary(e) {
          let t = new (u().BinaryReader)(e),
            n = new A();
          return A.deserializeBinaryFromReader(n, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return p.zj(A.MBF(), e, t);
        }
        serializeBinary() {
          var e = new (u().BinaryWriter)();
          return A.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          p.i0(A.M(), e, t);
        }
        serializeBase64String() {
          var e = new (u().BinaryWriter)();
          return A.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CNews_PublishPartnerEvent_Response";
        }
      }
      class y extends m.Message {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            y.prototype.news_feed_gid || p.Sg(y.M()),
            m.Message.initialize(this, e, 0, -1, void 0, null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            y.sm_m ||
              (y.sm_m = {
                proto: y,
                fields: {
                  news_feed_gid: {
                    n: 1,
                    br: p.qM.readFixed64String,
                    bw: p.gp.writeFixed64String,
                  },
                  start_index: {
                    n: 2,
                    d: 0,
                    br: p.qM.readUint32,
                    bw: p.gp.writeUint32,
                  },
                  amount: {
                    n: 3,
                    d: 100,
                    br: p.qM.readUint32,
                    bw: p.gp.writeUint32,
                  },
                },
              }),
            y.sm_m
          );
        }
        static MBF() {
          return y.sm_mbf || (y.sm_mbf = p.w0(y.M())), y.sm_mbf;
        }
        toObject(e = !1) {
          return y.toObject(e, this);
        }
        static toObject(e, t) {
          return p.BT(y.M(), e, t);
        }
        static fromObject(e) {
          return p.Uq(y.M(), e);
        }
        static deserializeBinary(e) {
          let t = new (u().BinaryReader)(e),
            n = new y();
          return y.deserializeBinaryFromReader(n, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return p.zj(y.MBF(), e, t);
        }
        serializeBinary() {
          var e = new (u().BinaryWriter)();
          return y.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          p.i0(y.M(), e, t);
        }
        serializeBase64String() {
          var e = new (u().BinaryWriter)();
          return y.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CNews_GetBatchPublishedPartnerEvent_Request";
        }
      }
      class f extends m.Message {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            f.prototype.clan_account_id || p.Sg(f.M()),
            m.Message.initialize(this, e, 0, -1, [3, 4, 5], null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            f.sm_m ||
              (f.sm_m = {
                proto: f,
                fields: {
                  clan_account_id: {
                    n: 1,
                    br: p.qM.readUint32,
                    bw: p.gp.writeUint32,
                  },
                  news_feed_gid: {
                    n: 2,
                    br: p.qM.readFixed64String,
                    bw: p.gp.writeFixed64String,
                  },
                  clan_event_gid: {
                    n: 3,
                    r: !0,
                    q: !0,
                    br: p.qM.readFixed64String,
                    pbr: p.qM.readPackedFixed64String,
                    bw: p.gp.writeRepeatedFixed64String,
                  },
                  news_post_gid: {
                    n: 4,
                    r: !0,
                    q: !0,
                    br: p.qM.readFixed64String,
                    pbr: p.qM.readPackedFixed64String,
                    bw: p.gp.writeRepeatedFixed64String,
                  },
                  news_url: {
                    n: 5,
                    r: !0,
                    q: !0,
                    br: p.qM.readString,
                    bw: p.gp.writeRepeatedString,
                  },
                },
              }),
            f.sm_m
          );
        }
        static MBF() {
          return f.sm_mbf || (f.sm_mbf = p.w0(f.M())), f.sm_mbf;
        }
        toObject(e = !1) {
          return f.toObject(e, this);
        }
        static toObject(e, t) {
          return p.BT(f.M(), e, t);
        }
        static fromObject(e) {
          return p.Uq(f.M(), e);
        }
        static deserializeBinary(e) {
          let t = new (u().BinaryReader)(e),
            n = new f();
          return f.deserializeBinaryFromReader(n, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return p.zj(f.MBF(), e, t);
        }
        serializeBinary() {
          var e = new (u().BinaryWriter)();
          return f.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          p.i0(f.M(), e, t);
        }
        serializeBase64String() {
          var e = new (u().BinaryWriter)();
          return f.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CNews_GetBatchPublishedPartnerEvent_Response";
        }
      }
      !(function (e) {
        (e.ConvertHTMLToBBCode = function (e, t) {
          return e.SendMsg("News.ConvertHTMLToBBCode#1", (0, d.I8)(h, t), v, {
            bConstMethod: !0,
            ePrivilege: 0,
            eWebAPIKeyRequirement: 1,
          });
        }),
          (e.PreviewPartnerEvents = function (e, t) {
            return e.SendMsg(
              "News.PreviewPartnerEvents#1",
              (0, d.I8)(E, t),
              w,
              { bConstMethod: !0, ePrivilege: 1 },
            );
          }),
          (e.GetNewsFeedByRepublishClan = function (e, t) {
            return e.SendMsg(
              "News.GetNewsFeedByRepublishClan#1",
              (0, d.I8)(C, t),
              b,
              { bConstMethod: !0, ePrivilege: 1 },
            );
          }),
          (e.PublishPartnerEvent = function (e, t) {
            return e.SendMsg("News.PublishPartnerEvent#1", (0, d.I8)(M, t), A, {
              ePrivilege: 1,
            });
          }),
          (e.GetBatchPublishedPartnerEvent = function (e, t) {
            return e.SendMsg(
              "News.GetBatchPublishedPartnerEvent#1",
              (0, d.I8)(y, t),
              f,
              { bConstMethod: !0, ePrivilege: 1 },
            );
          });
      })(a || (a = {}));
      var R = n(17720),
        T = n(6379);
      var B = n(44332),
        I = n(68797);
      class P {
        m_clanAccountID;
        m_clanSteamID;
        m_strRSSFeedURL = void 0;
        m_strRSSGID = void 0;
        m_rtimeRSSLastChecked = void 0;
        m_nPollIntervalSeconds = void 0;
        m_eRSSFeedLanguage = void 0;
        m_eCuratorLanguage = void 0;
        m_mapURLToPosted = new Map();
        constructor(e) {
          (0, o.Gn)(this),
            (this.m_clanAccountID = e.clanid),
            (this.m_clanSteamID = R.b.InitFromClanID(this.m_clanAccountID)),
            (this.m_strRSSFeedURL = e.rss_feed_url),
            (this.m_strRSSGID = e.rss_feed_gid),
            (this.m_eRSSFeedLanguage = e.rss_feed_language),
            (this.m_rtimeRSSLastChecked = e.rss_feed_last_checked),
            (this.m_nPollIntervalSeconds = e.poll_interval),
            (this.m_eCuratorLanguage = e.curation_language);
        }
        GetFeedLanguageHandleUnset() {
          return -1 == this.m_eRSSFeedLanguage
            ? -1 == this.m_eCuratorLanguage
              ? 0
              : this.m_eCuratorLanguage
            : this.m_eRSSFeedLanguage;
        }
        GetCuratorLanguage() {
          return -1 == this.m_eCuratorLanguage ? 0 : this.m_eCuratorLanguage;
        }
        BHasSavedRSSURL() {
          return Boolean(this.m_strRSSFeedURL);
        }
        GetRSSUrl() {
          return this.m_strRSSFeedURL ? this.m_strRSSFeedURL : "";
        }
        GetRSSLastRtimeChecked() {
          return this.m_rtimeRSSLastChecked;
        }
        GetClanSteamID() {
          return this.m_clanSteamID;
        }
        GetClanAccountID() {
          return this.m_clanAccountID;
        }
        BHasSetupFeed(e) {
          return Boolean(this.m_strRSSGID) && this.m_strRSSFeedURL === e;
        }
        BIsAutomationEnabled() {
          return Boolean(this.m_nPollIntervalSeconds > 0);
        }
        BHasFeedGID() {
          return Boolean(this.m_strRSSGID);
        }
        async PreviewPartnerEventsFromRSSFeed(e) {
          if (!this.BIsLoggedIn())
            return (
              console.error(
                "PreviewPartnerEventsFromRSSFeed: User not logged in",
              ),
              null
            );
          const t = d.w.Init(E);
          t.Body().set_rss_url(e),
            t.Body().set_lang(this.GetFeedLanguageHandleUnset());
          let n = await a.PreviewPartnerEvents(
            D.Get().GetCuratorTransport(),
            t,
          );
          return (
            1 != n.GetEResult() &&
              console.error(
                "PreviewPartnerEventsFromRSSFeed error: " +
                  n.GetEMsg() +
                  " " +
                  n.GetEResult(),
              ),
            n
          );
        }
        async FetchPublishedEvents(e = 100) {
          if (!this.BIsLoggedIn())
            return (
              console.error("FetchPublishedEvents: User not logged in"), null
            );
          if (!this.m_strRSSGID)
            return (
              console.error(
                "FetchPublishedEvents: Need to create a news feed first",
              ),
              null
            );
          const t = d.w.Init(y);
          t.Body().set_news_feed_gid(this.m_strRSSGID), t.Body().set_amount(e);
          let n = await a.GetBatchPublishedPartnerEvent(
            D.Get().GetCuratorTransport(),
            t,
          );
          return (
            1 != n.GetEResult()
              ? console.error(
                  "FetchPublishedEvents error: EMsg:" +
                    ("unknown EMsg ( " + n.GetEMsg() + " ) EResult:") +
                    n.GetEResult() +
                    " msg:" +
                    n.Hdr().error_message(),
                )
              : (0, o.h5)(() => {
                  for (let e = 0; e < n.Body().clan_event_gid().length; ++e) {
                    let t = {
                      url: n.Body().news_url()[e],
                      clan_event_gid: n.Body().clan_event_gid()[e],
                      news_post_gid: n.Body().news_post_gid()[e],
                    };
                    this.m_mapURLToPosted.set(t.url, t);
                  }
                }),
            n
          );
        }
        MapArticleURLToClanEventGID(e) {
          let t = this.m_mapURLToPosted.get(e);
          if (t) return t.clan_event_gid;
        }
        BIsLoggedIn() {
          return l.iA.logged_in;
        }
        async CreateOrUpdateRSSNewFeed(e, t = 0) {
          let n = new FormData();
          n.append("sessionid", l.TS.SESSIONID),
            n.append("gid", this.m_strRSSGID),
            n.append("lang", "" + this.GetCuratorLanguage()),
            n.append("rss_url", e),
            n.append("polling_interval", "" + t);
          const a =
            l.TS.STORE_BASE_URL +
            "curator/" +
            this.m_clanAccountID +
            "/admin/ajaxmanagerssfeed";
          let r = await i().post(a, n, { withCredentials: !0 });
          return (
            1 == r.data.success &&
              (0, o.h5)(() => {
                (this.m_strRSSGID = r.data.gid),
                  (this.m_strRSSFeedURL = e),
                  (this.m_nPollIntervalSeconds = t);
              }),
            r.data
          );
        }
        async UpdateAutomation(e) {
          return this.CreateOrUpdateRSSNewFeed(
            this.m_strRSSFeedURL,
            e ? 300 : 0,
          );
        }
        async CheckForNewUpdate() {
          if (this.m_strRSSGID) {
            let e = new FormData();
            e.append("sessionid", l.TS.SESSIONID),
              e.append("gid", this.m_strRSSGID);
            const t =
              l.TS.STORE_BASE_URL +
              "curator/" +
              this.m_clanAccountID +
              "/admin/ajaxcheckfornews";
            await i().post(t, e, { withCredentials: !0 });
          }
        }
        async CreatePost(e, t) {
          if (!this.BIsLoggedIn())
            return (
              console.error("CreatePartnerFromPreviewPost: User not logged in"),
              null
            );
          if (!this.m_strRSSGID)
            return (
              console.error(
                "CreatePartnerFromPreviewPost: Need to create a news feed first",
              ),
              null
            );
          let n = new _();
          n.set_gid(e.post.gid),
            n.set_news_feed_gid(this.m_strRSSGID),
            n.set_title(e.post.title),
            n.set_url(e.post.url),
            n.set_author(e.post.author),
            n.set_rtime_date(e.post.rtime_date),
            n.set_contents(e.post.contents),
            n.set_commited(e.post.commited),
            n.set_deleted(e.post.deleted),
            n.set_tags(e.post.tags),
            n.set_appids(e.post.appids),
            n.set_recommendation_state(e.post.recommendation_state),
            n.set_received_for_free(e.post.received_for_free),
            n.set_received_compensation(e.post.received_compensation),
            n.set_blurb(e.post.blurb);
          const r = d.w.Init(M);
          r.Body().set_post(n), r.Body().set_draft(t);
          let s = await a.PublishPartnerEvent(D.Get().GetCuratorTransport(), r);
          return (
            1 != s.GetEResult()
              ? console.error(
                  "CreatePost error: " + s.GetEMsg() + " " + s.GetEResult(),
                )
              : ((0, o.h5)(() => {
                  let t = {
                    url: e.post.url,
                    clan_event_gid: s.Body().clan_event_gid(),
                    news_post_gid: s.Body().news_post_gid(),
                  };
                  this.m_mapURLToPosted.set(e.post.url, t);
                }),
                T.O3.LoadPartnerEventFromClanEventGIDAndClanSteamID(
                  this.m_clanSteamID,
                  s.Body().clan_event_gid(),
                  0,
                )),
            s
          );
        }
      }
      (0, r.Cg)([o.sH], P.prototype, "m_strRSSFeedURL", void 0),
        (0, r.Cg)([o.sH], P.prototype, "m_strRSSGID", void 0),
        (0, r.Cg)([o.sH], P.prototype, "m_rtimeRSSLastChecked", void 0),
        (0, r.Cg)([o.sH], P.prototype, "m_nPollIntervalSeconds", void 0),
        (0, r.Cg)([o.sH], P.prototype, "m_eRSSFeedLanguage", void 0),
        (0, r.Cg)([o.sH], P.prototype, "m_eCuratorLanguage", void 0),
        (0, r.Cg)([o.sH], P.prototype, "m_mapURLToPosted", void 0);
      class D {
        constructor() {
          (0, o.Gn)(this);
        }
        static s_CuratorAdminStore;
        m_transport;
        m_mapClanAccountToAdmin = new Map();
        m_defaultAdmin = void 0;
        m_mapClanToEventRSSStats = new Map();
        m_setPendingClanInfo = new Set();
        m_PendingClanInfoPromise;
        m_PendingClanInfoResolve;
        m_cClanInfoRequestsInFlight = 0;
        GetCuratorTransport() {
          return (
            (0, B.w)(
              this.m_transport,
              "Expects Transpoate to be initialized but it is now",
            ),
            this.m_transport
          );
        }
        GetDefaultAdmin() {
          return this.m_defaultAdmin;
        }
        GetRSSAdminStats(e) {
          return this.m_mapClanToEventRSSStats.get(e);
        }
        static Get() {
          return (
            D.s_CuratorAdminStore ||
              ((D.s_CuratorAdminStore = new D()),
              D.s_CuratorAdminStore.Init(),
              "dev" === l.TS.WEB_UNIVERSE &&
                (window.g_CuratorAdminStore = D.s_CuratorAdminStore)),
            D.s_CuratorAdminStore
          );
        }
        Init() {
          let e = (0, l.Tc)("curatoradmin", "application_config");
          this.ValidateStoreDefault(e) &&
            ((this.m_defaultAdmin = new P(e)),
            this.m_mapClanAccountToAdmin.set(e.clanid, this.m_defaultAdmin)),
            this.ValidateWebAPI(e) &&
              (this.m_transport = new c.D(
                l.TS.WEBAPI_BASE_URL,
                e.webapi_token,
              ).GetServiceTransport());
        }
        ValidateStoreDefault(e) {
          return e && "object" == typeof e && "number" == typeof e.clanid;
        }
        ValidateWebAPI(e) {
          return e && "string" == typeof e.webapi_token;
        }
        BIsLoggedIn() {
          return l.iA.logged_in;
        }
        BHavePendingInfoRequests() {
          return (
            this.m_setPendingClanInfo.size > 0 ||
            this.m_cClanInfoRequestsInFlight > 0
          );
        }
        BIsLoadingClanID(e) {
          return this.m_setPendingClanInfo.has(e);
        }
        BHasClanIDLoaded(e) {
          return this.m_mapClanAccountToAdmin.has(e);
        }
        GetRSSAdminForClanAccountID(e) {
          return this.m_mapClanAccountToAdmin.get(e);
        }
        async QueueCuratorAdminInfoLoad(e) {
          return e
            ? this.m_mapClanAccountToAdmin.has(e)
              ? Promise.resolve()
              : (this.m_setPendingClanInfo.size ||
                  ((this.m_PendingClanInfoPromise = new Promise(
                    (e) => (this.m_PendingClanInfoResolve = e),
                  )),
                  window.setTimeout(() => this.FlushPendingClanInfo(), 25)),
                this.m_setPendingClanInfo.add(e),
                this.m_PendingClanInfoPromise)
            : ((0, B.w)(!e, "unexpected clanid of zero or undefined: " + e),
              Promise.resolve());
        }
        async FlushPendingClanInfo() {
          const e = this.m_PendingClanInfoResolve,
            t = Array.from(this.m_setPendingClanInfo);
          (this.m_PendingClanInfoPromise = void 0),
            (this.m_PendingClanInfoResolve = void 0),
            this.m_setPendingClanInfo.clear(),
            await this.LoadBatchedClanRSSAdminInfo(t),
            e();
        }
        EnsureClanInfoLoaded(e) {
          const t = e.filter(
            (e) =>
              !this.m_mapClanAccountToAdmin.has(e) &&
              this.m_setPendingClanInfo.has(e),
          );
          return (
            t.forEach((e) => this.QueueCuratorAdminInfoLoad(e)),
            t.length > 0 && this.m_PendingClanInfoPromise
              ? this.m_PendingClanInfoPromise
              : Promise.resolve()
          );
        }
        async LoadBatchedClanRSSAdminInfo(e) {
          this.m_cClanInfoRequestsInFlight++;
          let t = e.filter((e) => !this.m_mapClanAccountToAdmin.has(e));
          for (; t.length > 0; ) {
            const n = Math.min(50, t.length);
            t.slice(0, n);
            t = t.slice(n);
            try {
              const t =
                  l.TS.STORE_BASE_URL + "events_admin/ajaxgetrssadmininfo",
                n = { clanids: e },
                a = await i().get(t, { params: n, withCredentials: !0 });
              if (
                a &&
                a.data &&
                1 == a.data.success &&
                a.data.rss_admin_infos &&
                Array.isArray(a.data.rss_admin_infos)
              )
                (0, o.h5)(() => {
                  a.data.rss_admin_infos.forEach((e) => {
                    this.m_mapClanAccountToAdmin.set(e.clanid, new P(e));
                  }),
                    a.data.rss_event_stats.forEach((e) => {
                      this.m_mapClanToEventRSSStats.set(e.clan_account_id, e);
                    });
                });
              else {
                const e = (0, I.H)(a.data || {});
                console.error(
                  "LoadBatchedClanRSSAdminInfo error:" + e.strErrorMsg,
                  e,
                );
              }
            } catch (e) {
              const t = (0, I.H)(e);
              console.error(
                "LoadBatchedClanRSSAdminInfo catched error:" + t.strErrorMsg,
                t,
              );
            }
          }
          this.m_cClanInfoRequestsInFlight--;
        }
      }
      (0, r.Cg)([o.sH.shallow], D.prototype, "m_mapClanAccountToAdmin", void 0),
        (0, r.Cg)(
          [o.sH.shallow],
          D.prototype,
          "m_mapClanToEventRSSStats",
          void 0,
        );
    },
    63585: (e, t, n) => {
      "use strict";
      n.d(t, { q: () => O, A: () => U });
      var a = n(34629),
        r = n(41735),
        s = n.n(r),
        i = n(89241),
        o = n(78327),
        l = n(17720);
      class c {
        static s_CuratorStore;
        m_mapClanToRecommendation = new Map();
        static Get() {
          return (
            c.s_CuratorStore ||
              ((c.s_CuratorStore = new c()),
              c.s_CuratorStore.Init(),
              (window.g_CuratorRecommendationStore = c.s_CuratorStore)),
            c.s_CuratorStore
          );
        }
        Init() {}
        GetReviewForApp(e, t) {
          if (this.m_mapClanToRecommendation.has(e.GetAccountID())) {
            return this.m_mapClanToRecommendation.get(e.GetAccountID()).get(t);
          }
        }
        BHasReviewForApp(e, t) {
          return Boolean(this.GetReviewForApp(e, t));
        }
        BHasReviewForAppByClanAccount(e, t) {
          let n = l.b.InitFromClanID(e);
          return Boolean(this.GetReviewForApp(n, t));
        }
        async LoadAppRecommendation(e, t) {
          this.m_mapClanToRecommendation.has(e.GetAccountID()) ||
            this.m_mapClanToRecommendation.set(e.GetAccountID(), new Map());
          let n = this.m_mapClanToRecommendation.get(e.GetAccountID());
          const a = [];
          if (
            (t.forEach((e) => {
              n.has(e) || a.push(e);
            }),
            a.length > 0)
          ) {
            const t =
                o.TS.STORE_BASE_URL +
                "curator/" +
                e.GetAccountID() +
                "/admin/ajaxgetrecbyapps",
              r = await s().get(t, {
                params: {
                  appids: a,
                  cc: o.TS.COUNTRY || "US",
                  l: o.TS.LANGUAGE,
                },
              }),
              i = r && r.data;
            i &&
              i.rec_app &&
              i.rec_app.forEach((e) => {
                n.set(Number(e.appid), e);
              });
          }
        }
      }
      var d = n(75844),
        m = n(90626),
        u = n(22837),
        p = n(77516),
        g = n(6379),
        _ = n(33737),
        h = n(81301),
        v = n(95695),
        S = n.n(v),
        E = n(12037),
        w = n(51706),
        C = n(738),
        b = n(22797),
        M = n(51272),
        A = n(52038),
        y = n(56011),
        f = n(61859),
        R = n(68797),
        T = n(73745),
        B = n(71909),
        I = n(62490),
        P = n(41338),
        D = n(56330),
        G = n.n(D),
        F = n(61336),
        L = n(91675);
      let k = class extends m.Component {
        state = { strRssURL: i.A.Get().GetDefaultAdmin().GetRSSUrl() };
        m_Admin = i.A.Get().GetDefaultAdmin();
        OnChangeActualRSSURL(e) {
          this.setState({ strRssURL: e.target.value });
        }
        OnCreateOrSaveFeed(e) {
          e.preventDefault(),
            (0, C.pg)(
              m.createElement(z, {
                strRSSUrl: this.state.strRssURL,
                admin: this.m_Admin,
              }),
              (0, y.uX)(e),
            );
        }
        OnRevert(e) {
          e.preventDefault(),
            this.setState({ strRssURL: this.m_Admin.GetRSSUrl() });
        }
        render() {
          let e = Boolean(this.state.strRssURL === this.m_Admin.GetRSSUrl());
          if (void 0 !== window.Prototype)
            return window.location.reload(), null;
          const t = (0, u.x6)(
              (0, u.Lg)(this.m_Admin.GetFeedLanguageHandleUnset()),
            ),
            n = i.A.Get().GetDefaultAdmin();
          return m.createElement(
            "div",
            { className: (0, A.A)(B.Ctn) },
            m.createElement(
              "div",
              { className: "titleframe" },
              m.createElement(
                "h4",
                null,
                (0, f.we)("#CuratorAdmin_RSSFeed_title"),
              ),
              m.createElement(
                "p",
                { className: "subtitle" },
                (0, f.we)("#CuratorAdmin_RSSFeed_desc"),
              ),
              m.createElement(
                "p",
                null,
                (0, f.PP)(
                  "#CuratorAdmin_RSSFeed_doc_link",
                  m.createElement(
                    "a",
                    {
                      href: "https://partner.steamgames.com/doc/store/news/rss",
                      target: "_blank",
                    },
                    (0, f.we)("#CuratorAdmin_RSSFeed_doc_link_text"),
                  ),
                ),
              ),
              m.createElement(
                "p",
                { className: B.DashboardBtn },
                m.createElement(
                  M.uU,
                  {
                    href:
                      o.TS.COMMUNITY_BASE_URL +
                      "gid/" +
                      this.m_Admin.GetClanSteamID().ConvertTo64BitString() +
                      "/partnerevents/",
                    className: (0, A.A)(S().Button, S().Primary),
                  },
                  (0, f.we)("#RSSManager_EventDashBoard"),
                ),
              ),
            ),
            m.createElement(
              "div",
              { className: "darkframe" },
              m.createElement(
                "div",
                { className: B.LanguageRow },
                m.createElement(
                  "span",
                  { className: B.LanguageTitle },
                  (0, f.we)("#CuratorAdmin_RSSFeed_lang_only"),
                ),
                m.createElement("span", { className: B.LanguageSet }, t),
                m.createElement(
                  "a",
                  {
                    href:
                      o.TS.COMMUNITY_BASE_URL +
                      "gid/" +
                      this.m_Admin.GetClanSteamID().ConvertTo64BitString() +
                      "/edit ",
                    target: "_blank",
                    className: (0, A.A)(S().Button, B.PreviewBtn),
                  },
                  (0, f.we)("#CuratorAdmin_RSSFeed_edit_language"),
                ),
              ),
              Boolean(
                this.m_Admin.GetFeedLanguageHandleUnset() !=
                  this.m_Admin.GetCuratorLanguage(),
              ) &&
                m.createElement(
                  "div",
                  { className: (0, A.A)(B.LanguageRow, G().WarningIconLayout) },
                  m.createElement(
                    "span",
                    { className: B.LanguageTitle },
                    (0, f.we)(
                      "#CuratorAdmin_Curator_lang_only",
                      (0, f.we)(
                        "#Language_" +
                          (0, u.Lg)(this.m_Admin.GetCuratorLanguage()),
                      ),
                      t,
                    ),
                  ),
                ),
              m.createElement(
                "div",
                { className: (0, A.A)(S().FlexRowContainer, B.UrlSettingCtn) },
                m.createElement(_.pd, {
                  className: B.RssInpu,
                  type: "text",
                  name: "link_url",
                  id: "link_url",
                  value: this.state.strRssURL,
                  label: (0, f.we)("#CuratorAdmin_RSSFeed"),
                  placeholder: (0, f.we)("#CuratorAdmin_RSSFeed_placeholder"),
                  onChange: this.OnChangeActualRSSURL,
                  mustBeURL: !0,
                }),
                m.createElement(
                  "a",
                  {
                    className: "btn_green_white_innerfade btn_medium",
                    onClick: this.OnCreateOrSaveFeed,
                  },
                  m.createElement(
                    "span",
                    null,
                    (0, f.we)(e ? "#Button_Saved" : "#Button_Save"),
                  ),
                ),
                !e &&
                  m.createElement(
                    "a",
                    {
                      onClick: this.OnRevert,
                      className: "btn_grey_white_innerfade btn_medium",
                    },
                    (0, f.we)("#Button_Revert"),
                  ),
              ),
              m.createElement(H, { admin: n }),
              m.createElement("br", null),
              m.createElement(O, { strRssURL: this.state.strRssURL, admin: n }),
            ),
          );
        }
      };
      (0, a.Cg)([T.oI], k.prototype, "OnChangeActualRSSURL", null),
        (0, a.Cg)([T.oI], k.prototype, "OnCreateOrSaveFeed", null),
        (0, a.Cg)([T.oI], k.prototype, "OnRevert", null),
        (k = (0, a.Cg)([d.PA], k));
      const U = k;
      let O = class extends m.Component {
        state = { strParseRssURL: this.props.strRssURL, bLoadingPreview: !1 };
        m_cancelSignal = s().CancelToken.source();
        componentDidMount() {
          const { admin: e } = this.props;
          e.BHasFeedGID() &&
            e.BHasSavedRSSURL() &&
            e.GetRSSUrl() == this.props.strRssURL &&
            this.OnLoadPreview();
        }
        componentWillUnmount() {
          this.m_cancelSignal.cancel(
            "PreviewRSSViewAndControl component unmounted",
          );
        }
        RenderPreviews() {
          let e = this.props.admin,
            t = new Array();
          if (this.state.previews) {
            let n = this.state.previews;
            (n = n.sort((t, n) => {
              let a = e.MapArticleURLToClanEventGID(t.post.url),
                r = e.MapArticleURLToClanEventGID(n.post.url),
                s = a ? g.O3.GetClanEventModel(a) : null,
                i = r ? g.O3.GetClanEventModel(r) : null;
              return s && i
                ? i.postTime - s.postTime
                : s
                  ? -1
                  : i
                    ? 1
                    : n.post.rtime_date - t.post.rtime_date;
            })),
              n.forEach((n) => {
                t.push(
                  m.createElement(N, {
                    newsData: n,
                    admin: e,
                    key: "id: " + n.unique_id,
                    clanSteamID: e.GetClanSteamID(),
                    fnGetRSSUrl: this.GetRSSPreviewURL,
                  }),
                );
              });
          }
          return t;
        }
        GetRSSPreviewURL() {
          return this.state.strParseRssURL;
        }
        OnLoadPreview() {
          this.setState(
            {
              bLoadingPreview: !0,
              previews: void 0,
              strPreviewURL: this.props.strRssURL,
              strPreviewErrorMsg: void 0,
            },
            this.DoLoadPreview,
          );
        }
        async DoLoadPreview() {
          let e = this.props.admin,
            t = await e.PreviewPartnerEventsFromRSSFeed(this.props.strRssURL);
          if (t && 1 == t.GetEResult()) {
            let n = t.Body().toObject();
            this.setState(
              { strParseRssURL: n.rss_url, bLoadingPreview: !0 },
              async () => {
                await e.FetchPublishedEvents(Math.max(100, n.results.length));
                let t = new Array(),
                  a = new Array();
                if (
                  (n.results.forEach((n) => {
                    let r = e.MapArticleURLToClanEventGID(n.post.url);
                    r && t.push(r),
                      n.post.appids &&
                        1 === n.post.appids.length &&
                        0 !== n.post.recommendation_state &&
                        a.push(n.post.appids[0]);
                  }),
                  t.length > 0 &&
                    (await g.O3.LoadBatchPartnerEventsByEventGIDsOrAnnouncementGIDs(
                      t,
                      null,
                      this.m_cancelSignal,
                    )),
                  a.length > 0)
                ) {
                  const t = e.GetClanSteamID();
                  await c.Get().LoadAppRecommendation(t, a);
                }
                this.setState({ previews: n.results, bLoadingPreview: void 0 });
              },
            );
          } else
            this.setState({
              bLoadingPreview: void 0,
              strPreviewErrorMsg: (0, f.we)(
                "#Error_Description",
                t.GetEResult(),
                t.Hdr().error_message(),
              ),
            });
        }
        render() {
          const e = this.RenderPreviews();
          let t = this.props.admin;
          return m.createElement(
            "div",
            null,
            Boolean(
              !this.state.bLoadingPreview &&
                this.state.strPreviewURL !== this.props.strRssURL,
            ) &&
              m.createElement(
                "div",
                { className: B.PreviewListBtn },
                m.createElement(
                  _.$n,
                  {
                    disabled: !_.pd.validateUrl(this.props.strRssURL),
                    onClick: this.OnLoadPreview,
                  },
                  (0, f.we)("#CuratorAdmin_RSSFeed_preview"),
                ),
              ),
            this.state.bLoadingPreview &&
              m.createElement(b.t, {
                string: (0, f.we)("#Loading"),
                size: "medium",
                position: "center",
              }),
            this.state.strPreviewErrorMsg &&
              m.createElement(
                "div",
                { className: S().ErrorMsg },
                this.state.strPreviewErrorMsg,
              ),
            Boolean(e.length > 0) &&
              m.createElement(
                "div",
                null,
                m.createElement(
                  "p",
                  null,
                  (0, f.we)(
                    "#RSSManager_PreviewInfo",
                    this.state.strPreviewURL,
                  ),
                ),
                m.createElement("div", { className: B.PreviewListCtn }, e),
                m.createElement(
                  "p",
                  { className: B.DashboardBtn },
                  m.createElement(
                    M.uU,
                    {
                      href:
                        o.TS.COMMUNITY_BASE_URL +
                        "gid/" +
                        t.GetClanSteamID().ConvertTo64BitString() +
                        "/partnerevents/",
                      className: (0, A.A)(S().Button, S().Primary),
                    },
                    (0, f.we)("#RSSManager_EventDashBoard"),
                  ),
                ),
              ),
          );
        }
      };
      (0, a.Cg)([T.oI], O.prototype, "GetRSSPreviewURL", null),
        (0, a.Cg)([T.oI], O.prototype, "OnLoadPreview", null),
        (O = (0, a.Cg)([d.PA], O));
      let H = class extends m.Component {
        state = {};
        OnToggleChannelAutomation(e) {
          e
            ? (this.setState({ strErrorMessage: void 0 }),
              (0, C.pg)(
                m.createElement(z, {
                  strRSSUrl: this.props.admin.GetRSSUrl(),
                  admin: this.props.admin,
                  bActivatePooling: !0,
                }),
                window,
              ))
            : this.setState(
                {
                  strErrorMessage: void 0,
                  strReasonWaiting: (0, f.we)("#Saving"),
                },
                this.BDisableAutomation,
              );
        }
        async BDisableAutomation() {
          this.props.admin
            .UpdateAutomation(!1)
            .catch(() =>
              this.setState({
                strErrorMessage: (0, f.we)(
                  "#RSSManager_Status_Automation_DisableFailed",
                ),
              }),
            )
            .finally(() => this.setState({ strReasonWaiting: void 0 }));
        }
        async OnQueueScan(e) {
          this.setState({
            strReasonWaiting: (0, f.we)("#CuratorAdmin_RSSFeed_scannow"),
          }),
            this.props.admin
              .CheckForNewUpdate()
              .then(() =>
                (0, C.pg)(
                  m.createElement(w.o0, {
                    strTitle: (0, f.we)("#CuratorAdmin_RSSFeed_scannow"),
                    strDescription: (0, f.we)("#CuratorAdmin_RSSFeed_queued"),
                  }),
                  (0, y.uX)(e),
                ),
              )
              .catch((t) =>
                (0, C.pg)(
                  m.createElement(w.KG, {
                    strTitle: (0, f.we)("#CuratorAdmin_RSSFeed_scannow"),
                    strDescription: (0, R.H)(t).strErrorMsg,
                  }),
                  (0, y.uX)(e),
                ),
              )
              .finally(() => this.setState({ strReasonWaiting: void 0 }));
        }
        render() {
          return this.props.admin.BHasSavedRSSURL()
            ? m.createElement(
                "div",
                null,
                Boolean(this.state.strReasonWaiting) &&
                  m.createElement(b.t, {
                    size: "medium",
                    string: this.state.strReasonWaiting,
                  }),
                Boolean(this.state.strErrorMessage) &&
                  m.createElement(
                    "div",
                    { className: B.Error },
                    this.state.strErrorMessage,
                  ),
                m.createElement(_.RF, {
                  onChange: this.OnToggleChannelAutomation,
                  label: (0, f.we)("#RSSManager_Status_Automation_Desc"),
                  checked: this.props.admin.BIsAutomationEnabled(),
                  description: "",
                }),
                this.props.admin.BIsAutomationEnabled() &&
                  m.createElement(
                    "p",
                    null,
                    (0, f.we)("#CuratorAdmin_RSSFeed_lastscanned"),
                    " ",
                    (0, f.TW)(this.props.admin.GetRSSLastRtimeChecked(), !1),
                    "  @ ",
                    (0, L.KC)(this.props.admin.GetRSSLastRtimeChecked(), {
                      bForce24HourClock: !1,
                    }),
                    " ",
                    m.createElement(
                      "a",
                      { onClick: this.OnQueueScan },
                      m.createElement(
                        "span",
                        null,
                        (0, f.we)("#CuratorAdmin_RSSFeed_scannow"),
                      ),
                    ),
                  ),
              )
            : null;
        }
      };
      (0, a.Cg)([T.oI], H.prototype, "OnToggleChannelAutomation", null),
        (0, a.Cg)([T.oI], H.prototype, "OnQueueScan", null),
        (H = (0, a.Cg)([d.PA], H));
      let N = class extends m.Component {
        state = {
          clan_event_gid: this.props.admin.MapArticleURLToClanEventGID(
            this.props.newsData.post.url,
          ),
          bLoadingPartnerEvent: Boolean(
            this.props.admin.MapArticleURLToClanEventGID(
              this.props.newsData.post.url,
            ),
          ),
        };
        componentDidMount() {
          this.DoPartnerEventLoad();
        }
        async DoPartnerEventLoad() {
          if (this.state.clan_event_gid) {
            let e = this.props.admin.GetClanSteamID(),
              t = g.O3.GetClanEventModel(this.state.clan_event_gid);
            t ||
              (t = await g.O3.LoadHiddenPartnerEvent(
                e,
                this.state.clan_event_gid,
              )),
              this.setState({
                bLoadingPartnerEvent: !1,
                existingEventModel: t,
              });
          }
        }
        OnOpenPreviewAsPartnerEvent(e) {
          const { newsData: t, clanSteamID: n } = this.props;
          let a = new p.lh();
          (a.GID = "PreviewPartnerEventRow_0"),
            (a.clanSteamID = n),
            (a.postTime = Date.now() / 1e3),
            (a.startTime = Date.now() / 1e3),
            (a.type = 28),
            a.vecTags.push("auto_rssfeed"),
            a.vecTags.push("curator"),
            a.vecTags.push("curator_public"),
            a.name.set(0, t.title),
            a.description.set(0, t.desc),
            this.ValidateJSONDefault(t.jsondata) && (a.jsondata = t.jsondata),
            a.jsondata.read_more_link ||
              (a.jsondata.read_more_link = t.unique_id);
          let r = this.props.admin.GetFeedLanguageHandleUnset();
          !a.jsondata.localized_summary &&
            t.post.event_summary &&
            ((a.jsondata.localized_summary = (0, I.$Y)(
              a.jsondata.localized_summary,
              31,
              null,
            )),
            (a.jsondata.localized_summary[0] = t.post.event_summary),
            0 != r && (a.jsondata.localized_summary[r] = t.post.event_summary)),
            !a.jsondata.localized_subtitle &&
              t.post.event_subtitle &&
              ((a.jsondata.localized_subtitle = (0, I.$Y)(
                a.jsondata.localized_subtitle,
                31,
                null,
              )),
              (a.jsondata.localized_subtitle[0] = t.post.event_subtitle),
              0 != r &&
                (a.jsondata.localized_subtitle[r] = t.post.event_subtitle)),
            this.ShowModalEvent(a);
        }
        OnViewEvent() {
          this.ShowModalEvent(
            g.O3.GetClanEventModel(this.state.clan_event_gid),
          );
        }
        ShowModalEvent(e) {
          let t = document.getElementById("curator_header_area_ctn_id");
          t &&
            (e
              ? t.classList.add("curator_header_area_ctn_hideme")
              : t.classList.remove("curator_header_area_ctn_hideme")),
            this.setState({ eventModelForPreviewNow: e });
        }
        ValidateJSONDefault(e) {
          const t = e;
          return !(!t || Array.isArray(t) || "object" != typeof t);
        }
        OnPostNewsEvent(e) {
          const { newsData: t, fnGetRSSUrl: n } = this.props;
          (0, C.pg)(
            m.createElement(z, {
              newsData: t,
              admin: this.props.admin,
              strRSSUrl: n(),
              fnClanEventGID: this.OnClanEventCreateSuccess,
            }),
            (0, y.uX)(e),
          );
        }
        OnUpdateNewsEvent(e) {
          const { newsData: t, fnGetRSSUrl: n } = this.props;
          (0, C.pg)(
            m.createElement(z, {
              newsData: t,
              strRSSUrl: n(),
              admin: this.props.admin,
              fnClanEventGID: this.OnClanEventCreateSuccess,
              bUpdatePost: !0,
            }),
            (0, y.uX)(e),
          );
        }
        HideModalEvent() {
          this.state.eventModelForPreviewNow && this.ShowModalEvent(void 0);
        }
        OnClanEventCreateSuccess(e) {
          this.setState(
            { clan_event_gid: e, bLoadingPartnerEvent: !0 },
            this.DoPartnerEventLoad,
          );
        }
        OnShowRawRSS(e) {
          const t = this.props.newsData.rss_message,
            n = (() => {
              const e = t.match(/<entry[^>]*>([\s\S]*)<\/entry>/m);
              if (!e) return t;
              const n = e[1].match(/<content[^>]*>[\s\S]*<\/content>/m);
              return n ? (0, P.EK)(n[0]) : e[0];
            })();
          (0, C.pg)(
            m.createElement(
              w.o0,
              {
                bAlertDialog: !0,
                strTitle: (0, f.we)("#RSSManager_PostEvent_ViewRaw"),
              },
              m.createElement("textarea", {
                className: B.RawRSS,
                value: n,
                disabled: !0,
              }),
            ),
            (0, y.uX)(e),
          );
        }
        render() {
          const { newsData: e } = this.props,
            {
              clan_event_gid: t,
              existingEventModel: n,
              bLoadingPartnerEvent: a,
            } = this.state;
          let r = this.props.admin,
            s = r.GetClanSteamID(),
            i = n && n.BIsStagedEvent(),
            l = e.post.appids && 1 == e.post.appids.length && e.post.appids[0],
            d =
              0 !== e.post.recommendation_state &&
              l &&
              c.Get().BHasReviewForApp(s, l),
            u = "";
          if (n) {
            const e =
              n.GetVisibilityStartTimeAndDateUnixSeconds() ||
              n.GetPostTimeAndDateUnixSeconds();
            u = (0, f.$z)(e) + " @ " + (0, L.KC)(e, { bForce24HourClock: !1 });
          }
          return m.createElement(
            "div",
            {
              className: (0, A.A)(
                B.PostCtn,
                Boolean(t) ? B.ActivePost : "",
                Boolean(e.valid_post) ? "" : B.ErrorPost,
              ),
            },
            m.createElement("span", { className: B.PostTitle }, e.title),
            m.createElement("br", null),
            Boolean(n) &&
              m.createElement(
                m.Fragment,
                null,
                Boolean(n.BIsVisibleEvent()) &&
                  m.createElement(
                    "span",
                    { className: B.PostDate },
                    (0, f.we)("#RSSManager_PostEvent_PostedDate", u),
                  ),
                Boolean(!n.BIsVisibleEvent()) &&
                  m.createElement(
                    "span",
                    { className: (0, A.A)(B.PostDraft, i ? B.PostStaged : "") },
                    (0, f.we)(
                      i
                        ? "#RSSManager_PostEvent_Staged"
                        : "#RSSManager_PostEvent_Draft",
                      u,
                    ),
                  ),
              ),
            Boolean(!e.valid_post && e.post_error_msg) &&
              m.createElement(
                "div",
                { className: G().ErrorStylesBackground },
                (0, f.we)("#Error_Generic_Label"),
                " ",
                (0, f.we)(e.post_error_msg),
              ),
            m.createElement(
              "div",
              { className: B.ButtonCtn },
              Boolean(t)
                ? m.createElement(
                    m.Fragment,
                    null,
                    Boolean(a)
                      ? m.createElement(b.t, {
                          string: (0, f.we)("#Loading"),
                          size: "small",
                          position: "center",
                        })
                      : m.createElement(
                          "div",
                          {
                            onClick: this.OnViewEvent,
                            className: (0, A.A)(S().Button, B.PreviewBtn),
                          },
                          (0, f.we)("#RSSManager_PostEvent_ViewEvent"),
                        ),
                    m.createElement(
                      "a",
                      {
                        className: (0, A.A)(S().Button, B.PreviewBtn),
                        href:
                          o.TS.COMMUNITY_BASE_URL +
                          "gid/" +
                          r.GetClanSteamID().ConvertTo64BitString() +
                          "/partnerevents/edit/" +
                          this.state.clan_event_gid,
                      },
                      (0, f.we)("#RSSManager_PostEvent_EditEvent"),
                    ),
                    m.createElement(
                      "div",
                      {
                        onClick: this.OnUpdateNewsEvent,
                        className: (0, A.A)(S().Button, B.PreviewBtn),
                      },
                      (0, f.we)("#RSSManager_PostEvent_UpdateEvent"),
                    ),
                    d &&
                      m.createElement(
                        "a",
                        {
                          className: (0, A.A)(S().Button, B.PreviewBtn),
                          href: (0, F.k2)(
                            o.TS.STORE_BASE_URL +
                              "app/" +
                              e.post.appids[0] +
                              "/?curator_clanid=" +
                              s.GetAccountID(),
                          ),
                        },
                        (0, f.we)("#RSSManager_SeeReview"),
                      ),
                  )
                : m.createElement(
                    m.Fragment,
                    null,
                    m.createElement(
                      "div",
                      {
                        onClick: this.OnOpenPreviewAsPartnerEvent,
                        className: (0, A.A)(S().Button, B.PreviewBtn),
                      },
                      (0, f.we)("#CuratorAdmin_RSSFeed_col_preview_event"),
                    ),
                    m.createElement(
                      "div",
                      {
                        onClick: this.OnPostNewsEvent,
                        className: (0, A.A)(S().Button, B.PreviewBtn),
                      },
                      (0, f.we)("#CuratorAdmin_RSSFeed_col_create_event"),
                    ),
                  ),
              Boolean(e.rss_message && e.rss_message.length > 0) &&
                m.createElement(
                  "div",
                  { onClick: this.OnShowRawRSS, className: B.ViewRaw },
                  (0, f.we)("#RSSManager_PostEvent_ViewRaw"),
                ),
              Boolean(this.state.eventModelForPreviewNow) &&
                m.createElement(
                  w.of,
                  { className: E.StoreHeaderAdjust },
                  m.createElement(
                    "div",
                    null,
                    m.createElement(h.H, {
                      event: this.state.eventModelForPreviewNow,
                      fnClose: this.HideModalEvent,
                    }),
                  ),
                ),
            ),
          );
        }
      };
      (0, a.Cg)([T.oI], N.prototype, "DoPartnerEventLoad", null),
        (0, a.Cg)([T.oI], N.prototype, "OnOpenPreviewAsPartnerEvent", null),
        (0, a.Cg)([T.oI], N.prototype, "OnViewEvent", null),
        (0, a.Cg)([T.oI], N.prototype, "OnPostNewsEvent", null),
        (0, a.Cg)([T.oI], N.prototype, "OnUpdateNewsEvent", null),
        (0, a.Cg)([T.oI], N.prototype, "HideModalEvent", null),
        (0, a.Cg)([T.oI], N.prototype, "OnClanEventCreateSuccess", null),
        (0, a.Cg)([T.oI], N.prototype, "OnShowRawRSS", null),
        (N = (0, a.Cg)([d.PA], N));
      class z extends m.Component {
        state = {
          initialState: z.DetermineStartState(this.props),
          step: z.DetermineStartState(this.props),
          bDraftMode: !0,
        };
        static DetermineStartState(e) {
          let t = e.admin.BHasSetupFeed(e.strRSSUrl);
          return e.newsData && t
            ? e.bUpdatePost
              ? "update_post"
              : "create_post"
            : e.bActivatePooling
              ? "activate_feed"
              : e.admin.BHasSavedRSSURL()
                ? "update_feed"
                : "feed_missing";
        }
        OnCreateNewsFeed() {
          this.setState({ step: "creating_feed" }, this.DoCreateNewsFeed);
        }
        async DoCreateNewsFeed() {
          let e = await this.props.admin.CreateOrUpdateRSSNewFeed(
            this.props.strRSSUrl,
            this.props.bActivatePooling ? 300 : 0,
          );
          1 != e.success
            ? this.setState({
                step: "failure",
                eResult: e.success,
                strErrorMessage: (0, f.we)("#RSSManager_PostEvent_Failure"),
              })
            : this.setState({
                step: this.props.newsData ? "create_post" : "success",
              });
        }
        OnCreatePost() {
          this.setState({ step: "waiting_post" }, this.DoCreatePost);
        }
        async DoCreatePost() {
          let e = await this.props.admin.CreatePost(
            this.props.newsData,
            Boolean(this.state.bDraftMode),
          );
          1 != e.GetEResult()
            ? this.setState({
                step: "failure",
                eResult: e.GetEResult(),
                strErrorMessage: (0, f.we)("#RSSManager_PostEvent_Failure"),
              })
            : (this.props.fnClanEventGID &&
                this.props.fnClanEventGID(e.Body().clan_event_gid()),
              this.setState({
                step: "success",
                eventGID: e.Body().clan_event_gid(),
              }));
        }
        OnChangeDraftMode(e) {
          this.setState({ bDraftMode: e });
        }
        OnChangePermissionsCreateFeed(e) {
          this.setState({ bPermissions: e });
        }
        OnChangeConductCreateFeed(e) {
          this.setState({ bConduct: e });
        }
        GetStrTitle() {
          if (this.props.newsData)
            return (0, f.we)(
              this.props.bUpdatePost
                ? "#RSSManager_PostEvent_UpdateEvent"
                : "#RSSManager_PostEvent_Tilte",
            );
          switch (this.state.initialState) {
            case "feed_missing":
              return (0, f.we)("#RSSManager_PostEvent_CreateFeedTitle");
            default:
            case "update_feed":
              return (0, f.we)("#RSSManager_PostEvent_UpdateFeedTitle");
            case "activate_feed":
              return (0, f.we)("#RSSManager_Status_Automation_Activate");
          }
        }
        render() {
          const { strRSSUrl: e } = this.props;
          switch (this.state.step) {
            case "feed_missing":
            case "activate_feed":
            case "update_feed":
            default:
              return m.createElement(
                w.eV,
                null,
                m.createElement(_.Y9, null, " ", this.GetStrTitle(), " "),
                m.createElement(
                  _.nB,
                  null,
                  m.createElement(
                    _.a3,
                    null,
                    this.props.newsData &&
                      m.createElement(
                        "div",
                        null,
                        (0, f.we)(
                          "#RSSManager_PostEvent_CreateFeed_DuringPost",
                        ),
                      ),
                    Boolean("activate_feed" !== this.state.step) &&
                      m.createElement(
                        "div",
                        null,
                        (0, f.we)("#RSSManager_PostEvent_CreateFeed_Desc", e),
                      ),
                    m.createElement(
                      "div",
                      null,
                      (0, f.we)("#RSSManager_CreateFeed_Review"),
                    ),
                    m.createElement(
                      "div",
                      null,
                      m.createElement(_.Yh, {
                        label: (0, f.we)(
                          "#RSSManager_CreateFeed_Permissions_v1",
                        ),
                        onChange: this.OnChangePermissionsCreateFeed,
                        checked: Boolean(this.state.bPermissions),
                      }),
                    ),
                    m.createElement(
                      "div",
                      null,
                      m.createElement(_.Yh, {
                        label: (0, f.we)("#RSSManager_CreateFeed_Conduct_v1"),
                        onChange: this.OnChangeConductCreateFeed,
                        checked: Boolean(this.state.bConduct),
                      }),
                      m.createElement(
                        M.uU,
                        { href: o.TS.STORE_BASE_URL + "online_conduct/" },
                        (0, f.we)("#RSSManager_CreateFeed_Conduct_Link"),
                      ),
                    ),
                  ),
                  m.createElement(
                    _.wi,
                    null,
                    m.createElement(_.CB, {
                      bOKDisabled: !Boolean(
                        this.state.bPermissions && this.state.bConduct,
                      ),
                      onOK: this.OnCreateNewsFeed,
                      onCancel: this.props.closeModal,
                    }),
                  ),
                ),
              );
            case "failure":
              return m.createElement(
                w.KG,
                {
                  strDescription: (0, f.we)("#RSSManager_PostEvent_Failure"),
                  closeModal: this.props.closeModal,
                },
                m.createElement(
                  "div",
                  null,
                  (0, f.we)(
                    "#Error_Description",
                    this.state.eResult,
                    this.state.strErrorMessage,
                  ),
                ),
              );
            case "creating_feed":
            case "waiting_post":
              return m.createElement(
                w.o0,
                {
                  strTitle: this.GetStrTitle(),
                  strDescription: (0, f.we)("#RSSManager_PostEvent_InFlight"),
                  closeModal: this.props.closeModal,
                },
                m.createElement(b.t, { position: "center" }),
              );
            case "create_post":
              return m.createElement(
                w.eV,
                null,
                m.createElement(_.Y9, null, " ", this.GetStrTitle(), " "),
                m.createElement(
                  _.nB,
                  null,
                  m.createElement(
                    _.a3,
                    null,
                    m.createElement(
                      "div",
                      null,
                      m.createElement(
                        "div",
                        null,
                        (0, f.we)("#RSSManager_PostEvent_CreatePost"),
                      ),
                      m.createElement(
                        "div",
                        { className: B.DialogPostTitle },
                        this.props.newsData.title,
                      ),
                      m.createElement("br", null),
                      m.createElement(
                        "div",
                        null,
                        m.createElement(_.Yh, {
                          label: (0, f.we)(
                            "#RSSManager_PostEvent_CreatePost_Draft",
                          ),
                          onChange: this.OnChangeDraftMode,
                          checked: Boolean(this.state.bDraftMode),
                        }),
                      ),
                    ),
                  ),
                  m.createElement(
                    _.wi,
                    null,
                    m.createElement(_.CB, {
                      onOK: this.OnCreatePost,
                      onCancel: this.props.closeModal,
                    }),
                  ),
                ),
              );
            case "update_post":
              return m.createElement(
                w.eV,
                null,
                m.createElement(_.Y9, null, " ", this.GetStrTitle(), " "),
                m.createElement(
                  _.nB,
                  null,
                  m.createElement(
                    _.a3,
                    null,
                    m.createElement(
                      "div",
                      null,
                      m.createElement(
                        "div",
                        null,
                        (0, f.we)("#RSSManager_PostEvent_UpdatePost"),
                      ),
                      m.createElement("br", null),
                      m.createElement(
                        "div",
                        { className: B.DialogPostTitle },
                        this.props.newsData.title,
                      ),
                      m.createElement("br", null),
                    ),
                  ),
                  m.createElement(
                    _.wi,
                    null,
                    m.createElement(_.CB, {
                      onOK: this.OnCreatePost,
                      onCancel: this.props.closeModal,
                    }),
                  ),
                ),
              );
            case "success":
              return m.createElement(
                w.o0,
                {
                  strTitle: this.GetStrTitle(),
                  strDescription: (0, f.we)(
                    this.props.newsData
                      ? "#RSSManager_PostEvent_Success"
                      : "#RSSManager_PostEvent_Success_feed",
                  ),
                  closeModal: this.props.closeModal,
                  bAlertDialog: !0,
                },
                Boolean(this.state.eventGID) &&
                  m.createElement(
                    "a",
                    {
                      href:
                        o.TS.COMMUNITY_BASE_URL +
                        "gid/" +
                        this.props.admin
                          .GetClanSteamID()
                          .ConvertTo64BitString() +
                        "/partnerevents/edit/" +
                        this.state.eventGID,
                    },
                    (0, f.we)("#RSSManager_PostEvent_EventLink"),
                  ),
              );
          }
        }
      }
      (0, a.Cg)([T.oI], z.prototype, "OnCreateNewsFeed", null),
        (0, a.Cg)([T.oI], z.prototype, "DoCreateNewsFeed", null),
        (0, a.Cg)([T.oI], z.prototype, "OnCreatePost", null),
        (0, a.Cg)([T.oI], z.prototype, "DoCreatePost", null),
        (0, a.Cg)([T.oI], z.prototype, "OnChangeDraftMode", null),
        (0, a.Cg)([T.oI], z.prototype, "OnChangePermissionsCreateFeed", null),
        (0, a.Cg)([T.oI], z.prototype, "OnChangeConductCreateFeed", null),
        (0, a.Cg)([T.oI], z.prototype, "GetStrTitle", null);
    },
    34568: (e, t, n) => {
      "use strict";
      n.r(t), n.d(t, { default: () => c });
      var a = n(90626),
        r = n(92757),
        s = n(63585),
        i = n(89241),
        o = n(84811),
        l = n(60746);
      class c extends a.Component {
        state = { bIsLoading: !0 };
        async componentDidMount() {
          i.A.Get(), await l.KN.InitGlobal(), this.setState({ bIsLoading: !1 });
        }
        render() {
          return this.state.bIsLoading
            ? null
            : a.createElement(
                o.tH,
                null,
                a.createElement(
                  r.dO,
                  null,
                  a.createElement(r.qh, {
                    exact: !0,
                    path: "/:prefix(curator|pub|publisher|dev|developer|franchise)/:curatorVanity/admin/manage_rss",
                    component: s.A,
                  }),
                  a.createElement(r.qh, null, !1),
                ),
              );
        }
      }
    },
    58426: (e, t, n) => {
      "use strict";
      n.r(t), n.d(t, { default: () => Xe });
      var a = n(43527),
        r = n(89241),
        s = n(78327),
        i = n(41735),
        o = n.n(i),
        l = n(68797);
      class c {
        static s_Singleton;
        m_rgRSSEnabledClans = [];
        GetAllRSSEnabledClans() {
          return this.m_rgRSSEnabledClans;
        }
        GetTrustedEnabledClans(e) {
          return this.m_rgRSSEnabledClans
            .filter((t) => t.is_trusted_press == e)
            .map((e) => e.clan_accoundid);
        }
        static Get() {
          return (
            c.s_Singleton || ((c.s_Singleton = new c()), c.s_Singleton.Init()),
            c.s_Singleton
          );
        }
        Init() {
          let e = (0, s.Tc)("rssaccountinfo", "application_config");
          this.ValidateRSSAccountConfig(e) && (this.m_rgRSSEnabledClans = e);
        }
        ValidateRSSAccountConfig(e) {
          const t = e;
          return (
            t &&
            Array.isArray(t) &&
            t.length > 0 &&
            "object" == typeof t[0] &&
            "number" == typeof t[0].clan_accoundid
          );
        }
        async LoadKnownAllRSSInfo() {
          const e = new Array(),
            t = r.A.Get();
          this.m_rgRSSEnabledClans.forEach((n) => {
            t.BHasClanIDLoaded(n.clan_accoundid) ||
              e.push(t.QueueCuratorAdminInfoLoad(n.clan_accoundid));
          }),
            await Promise.all(e);
        }
        ExtractWithoutRSSAutomation() {
          const e = [],
            t = r.A.Get();
          return (
            this.m_rgRSSEnabledClans.forEach((n) => {
              const a = t.GetRSSAdminForClanAccountID(n.clan_accoundid);
              a && !a.BIsAutomationEnabled() && e.push(n.clan_accoundid);
            }),
            e
          );
        }
        async HintLoadAccounts() {}
        async ReindexClanEventsAndReloadAccount(e) {
          const t = s.TS.STORE_BASE_URL + "events_admin/ajaxflushandreindexrss",
            n = new FormData();
          n.set("sessionid", s.TS.SESSIONID), n.append("clanids", "" + e);
          try {
            let e = await o().post(t, n, { withCredentials: !0 });
            if (1 == e?.data?.success) return !0;
          } catch (e) {
            const t = (0, l.H)(e);
            console.error(
              "Failed to ReindexClanEventsAndReloadAccount: " + t.strErrorMsg,
              t,
            );
          }
          return !1;
        }
      }
      var d = n(63585),
        m = n(75844),
        u = n(90626),
        p = n(92757),
        g = n(17720),
        _ = n(4796),
        h = n(33737),
        v = n(84811),
        S = n(32541),
        E = n(738),
        w = n(12155),
        C = n(22797),
        b = n(32754),
        M = n(94607),
        A = n(52038),
        y = n(56011),
        f = n(61859),
        R = n(52081),
        T = n.n(R),
        B = n(51706);
      const I = (0, p.y)((e) => {
          const [t, n] = (0, u.useState)(!0);
          if (
            ((0, u.useEffect)(() => {
              (async () => {
                _.ac.Init(), await c.Get().HintLoadAccounts(), n(!1);
              })();
            }, []),
            t)
          )
            return u.createElement(C.t, {
              string: (0, f.we)("#Loading"),
              size: "medium",
            });
          const a = c.Get().GetTrustedEnabledClans(!0),
            r = c.Get().GetTrustedEnabledClans(!1);
          return u.createElement(
            "div",
            null,
            u.createElement(
              v.tH,
              null,
              u.createElement("h1", null, (0, f.we)("#RSSModeration_Title")),
              u.createElement(P, null),
              u.createElement(k, {
                rgClanIDs: c
                  .Get()
                  .GetAllRSSEnabledClans()
                  .map((e) => e.clan_accoundid),
              }),
              u.createElement(D, {
                rgClanIDs: a,
                strTitle: (0, f.we)("#RSSModeration_TrustTitle"),
              }),
              u.createElement(D, {
                rgClanIDs: r,
                strTitle: (0, f.we)("#RSSModeration_RestTitle"),
              }),
            ),
          );
        }),
        P = (0, m.PA)((e) => {
          const [t, n] = (0, u.useState)(!1),
            [a, r] = (0, u.useState)(void 0);
          return t
            ? u.createElement(C.t, {
                string: (0, f.we)("#Loading"),
                size: "medium",
              })
            : void 0 !== a
              ? Boolean(a.length > 0)
                ? u.createElement(D, {
                    rgClanIDs: a,
                    strTitle: (0, f.we)("#RSSModeration_InactiveAutomation"),
                  })
                : u.createElement(
                    "div",
                    null,
                    (0, f.we)("#RSSModreation_AllAutomationEnabled"),
                  )
              : u.createElement(
                  h.$n,
                  {
                    onClick: async () => {
                      n(!0),
                        await c.Get().LoadKnownAllRSSInfo(),
                        r(c.Get().ExtractWithoutRSSAutomation()),
                        n(!1);
                    },
                  },
                  (0, f.we)("#RSSModeration_FindInActive"),
                  " ",
                );
        }),
        D = (e) => {
          const { rgClanIDs: t, strTitle: n } = e,
            [a, r] = (0, u.useState)(!1);
          let s = null;
          return (
            a ||
              (s = t.map((e) =>
                u.createElement(G, { key: e, clanAccountID: e }),
              )),
            u.createElement(
              "div",
              { className: (0, A.A)(T().SectionContainer) },
              u.createElement(
                "h2",
                {
                  className: (0, A.A)(T().ModSectionTitle),
                  onDoubleClick: () => r(!a),
                },
                n,
                u.createElement("span", null, " "),
                u.createElement(
                  h.$n,
                  { className: T().ResizeButton, onClick: () => r(!a) },
                  a
                    ? u.createElement(w.hz4, null)
                    : u.createElement(w.Xjb, null),
                ),
              ),
              a &&
                u.createElement(
                  h.$n,
                  { onClick: () => r(!1) },
                  (0, f.we)("#Sale_ShowContents"),
                ),
              s,
            )
          );
        },
        G = (0, m.PA)((e) => {
          const { clanAccountID: t } = e;
          return _.ac.BHasClanInfoLoadedByAccountID(t) &&
            r.A.Get().BHasClanIDLoaded(t)
            ? u.createElement(L, {
                clanInfo: _.ac.GetClanInfoByClanAccountID(t),
                rssAdminInfo: r.A.Get().GetRSSAdminForClanAccountID(t),
              })
            : u.createElement(F, { clanAccountID: t });
        }),
        F = (e) => {
          const { clanAccountID: t } = e,
            n = "-500px";
          return u.createElement(
            M.Y,
            {
              onEnter: async () => {
                const e = g.b.InitFromClanID(t);
                await Promise.all([
                  _.ac.LoadClanInfoForClanSteamID(e),
                  r.A.Get().QueueCuratorAdminInfoLoad(t),
                ]);
              },
              topOffset: n,
              bottomOffset: n,
            },
            u.createElement(
              "div",
              { className: T().TileContainer },
              u.createElement("div", null, (0, f.we)("#Loading"), " - ", t),
            ),
          );
        },
        L = (e) => {
          const { clanInfo: t, rssAdminInfo: n } = e,
            [a, i] = (0, u.useState)(!1),
            o = s.TS.STORE_BASE_URL + "newshub/group/" + t.clanAccountID,
            l =
              s.TS.STORE_BASE_URL +
              "curator/" +
              t.clanAccountID +
              "/admin/manage_rss",
            c = s.TS.COMMUNITY_BASE_URL + "group/" + t.clanAccountID,
            m =
              "https://steamsupport.valvesoftware.com/clan/overview/" +
              g.b.InitFromClanID(t.clanAccountID).ConvertTo64BitString(),
            p = r.A.Get().GetRSSAdminStats(t.clanAccountID);
          return u.createElement(
            "div",
            { className: (0, A.A)(T().TileContainer) },
            u.createElement(
              "div",
              { className: (0, A.A)(T().TileSpread) },
              u.createElement(
                "div",
                null,
                u.createElement(
                  "div",
                  null,
                  t.group_name,
                  " - ",
                  t.clanAccountID,
                ),
                u.createElement(
                  "div",
                  null,
                  u.createElement(
                    "div",
                    null,
                    (0, f.we)("#CuratorAdmin_RSSFeed"),
                    ":",
                  ),
                  u.createElement("a", { href: n.GetRSSUrl() }, n.GetRSSUrl()),
                ),
                Boolean(p) &&
                  u.createElement(
                    "div",
                    null,
                    u.createElement(
                      "div",
                      null,
                      (0, f.we)(
                        "#RSSModeration_TotalEvents",
                        p.total_event_count.toLocaleString(),
                      ),
                    ),
                    u.createElement(
                      "div",
                      null,
                      (0, f.we)(
                        "#RSSModeration_RSSEvents",
                        p.rss_event_count.toLocaleString(),
                      ),
                    ),
                  ),
                u.createElement(
                  h.$n,
                  { onClick: () => i(!a) },
                  (0, f.we)(
                    a
                      ? "#Bbcode_Expand_Details_Expanded"
                      : "#Bbcode_Expand_Details_Collapsed",
                  ),
                ),
              ),
              u.createElement(
                "div",
                null,
                u.createElement(
                  "ul",
                  null,
                  u.createElement(
                    "li",
                    null,
                    u.createElement(
                      "a",
                      { href: o },
                      (0, f.we)("#EventDisplay_NewsHubSubtitle"),
                    ),
                  ),
                  u.createElement(
                    "li",
                    null,
                    u.createElement(
                      "a",
                      { href: l },
                      (0, f.we)("#CuratorAdmin_RSSFeed_title"),
                    ),
                  ),
                  u.createElement(
                    "li",
                    null,
                    u.createElement(
                      "a",
                      { href: c },
                      (0, f.we)("#RSSModeration_GroupPage"),
                    ),
                  ),
                  u.createElement(
                    "li",
                    null,
                    u.createElement(
                      "a",
                      { href: m },
                      (0, f.we)("#RSSModeration_SupportPage"),
                    ),
                  ),
                  u.createElement(
                    "li",
                    null,
                    u.createElement(k, { rgClanIDs: [t.clanAccountID] }),
                  ),
                ),
              ),
              u.createElement(
                "div",
                { className: T().CreatorCtn },
                u.createElement(S.hA, {
                  bHideCreatorType: !0,
                  creatorID: {
                    name: null,
                    clan_account_id: t.clanAccountID,
                    type: "developer",
                  },
                  bSmallFormat: !0,
                }),
              ),
            ),
            Boolean(a) &&
              u.createElement(
                u.Fragment,
                null,
                Boolean(n.BHasSavedRSSURL())
                  ? u.createElement(d.q, { strRssURL: n.GetRSSUrl(), admin: n })
                  : u.createElement(
                      "div",
                      null,
                      (0, f.we)("#RSSModeration_NoRSSFeed"),
                    ),
              ),
          );
        },
        k = (e) =>
          u.createElement(
            b.he,
            {
              toolTipContent: (0, f.we)("#RSSModeration_ReindexAndReload_ttip"),
            },
            u.createElement(
              h.$n,
              {
                onClick: (t) => {
                  (0, E.pg)(u.createElement(U, { ...e }), (0, y.uX)(t));
                },
              },
              (0, f.we)("#RSSModeration_ReindexAndReload"),
            ),
          ),
        U = (e) => {
          const [t, n] = (0, u.useState)(void 0),
            [a, r] = (0, u.useState)(!1),
            [s, i] = (0, u.useState)(void 0),
            o = () => e.closeModal && e.closeModal();
          return u.createElement(
            B.x_,
            { onEscKeypress: o },
            u.createElement(
              h.UC,
              null,
              u.createElement(
                h.Y9,
                null,
                " ",
                (0, f.we)("#RSSModeration_ReindexAndReload"),
                " ",
              ),
              u.createElement(
                h.nB,
                null,
                u.createElement(
                  h.a3,
                  null,
                  void 0 === t
                    ? u.createElement(
                        u.Fragment,
                        null,
                        u.createElement(
                          "span",
                          null,
                          (0, f.we)(
                            "#RSSModeration_Reindex_Verify",
                            e.rgClanIDs.length,
                          ),
                        ),
                        u.createElement(
                          h.jn,
                          {
                            onClick: async () => {
                              let t = 0;
                              n(t);
                              for (let a = 0; a < e.rgClanIDs.length; ++a) {
                                let r = e.rgClanIDs[a];
                                if (
                                  !(await c
                                    .Get()
                                    .ReindexClanEventsAndReloadAccount(r))
                                ) {
                                  i((0, f.we)("#Error_Generic_Label"));
                                  break;
                                }
                                (t += 1), n(t);
                              }
                              r(!0);
                            },
                          },
                          (0, f.we)("#Button_Continue"),
                        ),
                      )
                    : u.createElement(
                        u.Fragment,
                        null,
                        u.createElement(
                          "span",
                          null,
                          (0, f.we)(
                            "#RSSModeration_Reindex_Action",
                            t,
                            e.rgClanIDs.length,
                          ),
                        ),
                        a
                          ? u.createElement(
                              "span",
                              null,
                              (0, f.we)(
                                "#EventEditor_ImportFromHTML_ConvertFinished",
                              ),
                            )
                          : u.createElement(C.t, {
                              size: "small",
                              string: (0, f.we)("#Updating"),
                            }),
                      ),
                  Boolean(s) && u.createElement("span", null, s, " "),
                ),
                u.createElement(
                  h.wi,
                  null,
                  u.createElement(
                    h.$n,
                    { onClick: o },
                    (0, f.we)(a ? "#Button_OK" : "#Button_Cancel"),
                  ),
                ),
              ),
            ),
          );
        };
      var O = n(34629),
        H = n(6379),
        N = n(73745),
        z = n(14947);
      class q {
        static s_Singleton;
        m_mapEventGIDToSolrData = new Map();
        m_listEvents = new Array();
        BHasSolrEvent(e) {
          return this.m_mapEventGIDToSolrData.has(e);
        }
        GetAllSolrEvents() {
          return this.m_listEvents;
        }
        static Get() {
          return q.s_Singleton || (q.s_Singleton = new q()), q.s_Singleton;
        }
        constructor() {
          (0, z.Gn)(this);
        }
        ClearAllSolrEvents() {
          (this.m_mapEventGIDToSolrData = new Map()),
            (this.m_listEvents = new Array());
        }
        async LoadPartnerEventForQueryIncremental(
          e,
          t = 0,
          n = 10,
          a,
          r,
          s,
          i,
          o,
          l,
        ) {
          const c = await this.GetLatestPartnerEvents(
            e,
            t,
            n,
            a,
            r,
            s,
            i,
            o,
            l,
          );
          let d = new Array();
          return (
            (0, z.h5)(() => {
              c.forEach((e) => {
                this.m_mapEventGIDToSolrData.has(e.unique_id) ||
                  (d.push(e),
                  this.m_mapEventGIDToSolrData.set(e.unique_id, e),
                  this.m_listEvents.push(e));
              });
            }),
            d
          );
        }
        async GetLatestPartnerEvents(
          e,
          t = 0,
          n = 10,
          a,
          r,
          i,
          l,
          c,
          d,
          m,
          u,
          p,
          g,
        ) {
          const _ =
              s.TS.STORE_BASE_URL + "events_admin/ajaxgetlatestpartnerevents",
            h = {
              page: t,
              count: n,
              date: l,
              appids: void 0 === a ? void 0 : a.join(","),
              required_tags: void 0 === r ? void 0 : r.join(","),
              exclude_tags: void 0 === i ? void 0 : i.join(","),
              eventtypefilter: void 0 === c ? void 0 : c.join(","),
              orderByVisibility: d || void 0,
              creator_home_clan_id: void 0 === m ? void 0 : m.join(","),
              showUnpublished: void 0 === p ? void 0 : p,
              sale_only: void 0 === g ? void 0 : g,
              term: void 0 === u ? void 0 : u,
            },
            v = await o().get(_, {
              params: h,
              withCredentials: !0,
              cancelToken: e ? e.token : void 0,
            });
          return v.data ? v.data.docs : [];
        }
      }
      (0, O.Cg)([z.sH], q.prototype, "m_mapEventGIDToSolrData", void 0),
        (0, O.Cg)([z.sH], q.prototype, "m_listEvents", void 0),
        (0, O.Cg)([z.XI], q.prototype, "ClearAllSolrEvents", null);
      var x = n(71138);
      class j {
        constructor() {
          (0, z.Gn)(this);
        }
        m_backfill = void 0;
        m_mapEventGIDProcessed = new Map();
        m_vecEventGID = new Array();
        m_bBackfillInProgress = !1;
        m_nProcessed = 0;
        m_nSuccesses = 0;
        m_nFailures = 0;
        m_nWarning = 0;
        m_nSkipped = 0;
        GetBackfill() {
          return this.m_backfill;
        }
        SetBackfill(e) {
          this.m_backfill = e;
        }
        StartBackfill(e) {
          (this.m_backfill = e), (this.m_bBackfillInProgress = !0);
        }
        CompleteBackfill(e) {
          (this.m_backfill = void 0), (this.m_bBackfillInProgress = !1);
        }
        BIsBackkFillInProgress() {
          return this.m_bBackfillInProgress;
        }
        GetEventBackfillProgress() {
          return this.m_mapEventGIDProcessed;
        }
        CreateOrGetBackfillProgess(e) {
          return (
            this.m_mapEventGIDProcessed.has(e) ||
              (this.m_mapEventGIDProcessed.set(e, { bProcessing: !1 }),
              this.m_vecEventGID.push(e)),
            this.m_mapEventGIDProcessed.get(e)
          );
        }
        BHasProgress(e) {
          return this.m_mapEventGIDProcessed.has(e);
        }
        GetBackfillGIDs() {
          return this.m_vecEventGID;
        }
        CloseProgress(e, t) {
          (this.m_nProcessed += 1),
            t.bAlreadyProcessed || t.bSkipped
              ? (this.m_nSkipped += 1)
              : t.bSucceeded
                ? (this.m_nSuccesses += 1)
                : t.bFailed && (this.m_nFailures += 1),
            t.bWarning && (this.m_nWarning += 1),
            this.m_mapEventGIDProcessed.set(e, t);
        }
      }
      (0, O.Cg)([z.sH], j.prototype, "m_backfill", void 0),
        (0, O.Cg)([z.sH], j.prototype, "m_mapEventGIDProcessed", void 0),
        (0, O.Cg)([z.sH], j.prototype, "m_bBackfillInProgress", void 0),
        (0, O.Cg)([z.sH], j.prototype, "m_nProcessed", void 0),
        (0, O.Cg)([z.sH], j.prototype, "m_nSuccesses", void 0),
        (0, O.Cg)([z.sH], j.prototype, "m_nFailures", void 0),
        (0, O.Cg)([z.sH], j.prototype, "m_nWarning", void 0),
        (0, O.Cg)([z.sH], j.prototype, "m_nSkipped", void 0),
        (0, O.Cg)([z.XI], j.prototype, "StartBackfill", null),
        (0, O.Cg)([z.XI], j.prototype, "CompleteBackfill", null),
        (0, O.Cg)([z.XI], j.prototype, "CloseProgress", null);
      const W = new j();
      var V = n(45559),
        Y = n(73744),
        Q = n(75113),
        K = n(28954),
        X = n(64953);
      let J = class extends u.Component {
        m_cancelSignal = o().CancelToken.source();
        m_nImageID = 0;
        m_mapArtworkResizeSuccess = new Map();
        state = { eBackfillState: void 0 };
        componentWillUnmount() {
          this.m_cancelSignal.cancel(
            "EventBackfillLanding component unmounted",
          );
        }
        OnArtworkResizeBackfill() {
          null == this.state.eBackfillState &&
            this.setState(
              { eBackfillState: "started" },
              this.BeginArtworkResize,
            );
        }
        BeginArtworkResize() {
          this.m_mapArtworkResizeSuccess.set("capsule", 0),
            this.m_mapArtworkResizeSuccess.set("spotlight", 0),
            this.m_mapArtworkResizeSuccess.set("background", 0),
            this.RunArtworkResizeBackfill()
              .then(() => this.setState({ eBackfillState: "success" }))
              .catch((e) => {
                let t = (0, l.H)(e);
                console.error(
                  "EventBackfillLanding: error " + t.strErrorMsg,
                  t,
                ),
                  this.setState({ eBackfillState: "error" });
              });
        }
        async GetImageInfo(e, t, n = "") {
          const a = x.i6.GetExtensionTypeFromURL(t),
            r = x.i6.GetHashFromHashAndExt(t) + n;
          return x.pU.AsyncGetImageResolution(e, r, a, this.m_cancelSignal, !0);
        }
        HandleErrorFatal(e, t, n, a) {
          let r = (0, l.H)(t),
            s =
              "EventBackfillLanding: " +
              n +
              " on GID " +
              e +
              " : " +
              r.strErrorMsg;
          console.error(s, r),
            a
              ? ((a.bFailed = !0), (a.strMessage = s), W.CloseProgress(e, a))
              : W.CompleteBackfill("resize_image");
        }
        async HandleResizeForImageType(e, t, n, a, r) {
          for (let s = 0; s < e.length && s < 31; ++s)
            if (e[s] && e[s].length > 0) {
              let i = e[s],
                o = x.i6.GetExtensionTypeFromURL(i);
              const c = new g.b(t.clan_steamid);
              if (o) {
                let e = await this.GetImageInfo(c, i).catch(
                  (e) => (
                    this.HandleErrorFatal(null, e, "GetImageInfo Original", n),
                    { height: 0, width: 0, success: 2 }
                  ),
                );
                if (1 == e.success && (0, Y.pk)(e.width, e.height, a)) {
                  if (
                    1 ==
                    (
                      await this.GetImageInfo(c, i, r).catch(
                        (e) => (
                          this.HandleErrorFatal(
                            null,
                            e,
                            "GetImageInfo Resize",
                            n,
                          ),
                          { height: 0, width: 0, success: 2 }
                        ),
                      )
                    ).success
                  )
                    n.bAlreadyProcessed = !0;
                  else {
                    n.bProcessing = !0;
                    let e = x.i6.GetHashFromHashAndExt(i),
                      t = x.i6.GetExtensionStringFromHashAndExt(i),
                      r = (0, X.K_)(a);
                    await K.V.SendResizeRequest(this.m_cancelSignal, c, e, t, r)
                      .then((e) => {
                        console.log("success on the resize request"),
                          e == r.length
                            ? ((n.bSucceeded = !0),
                              this.m_mapArtworkResizeSuccess.set(
                                a,
                                this.m_mapArtworkResizeSuccess.get(a) + 1,
                              ))
                            : ((n.bFailed = !0),
                              (n.strMessage =
                                "Did not resize all: " +
                                a +
                                " " +
                                e +
                                " / " +
                                r.length));
                      })
                      .catch((e) => {
                        n.bFailed = !0;
                        let t = (0, l.H)(e);
                        (n.strMessage = t.strErrorMsg),
                          console.error("Resize: " + t.strErrorMsg, t);
                      });
                  }
                } else n.bSkipped = !0;
              } else n.bSkipped = !0;
            }
        }
        async RunArtworkResizeBackfill() {
          W.StartBackfill("resize_image");
          let e = 0;
          for (; W.BIsBackkFillInProgress(); ) {
            let t = await q
              .Get()
              .LoadPartnerEventForQueryIncremental(this.m_cancelSignal, e, 25)
              .catch((e) =>
                this.HandleErrorFatal(
                  null,
                  e,
                  "LoadPartnerEventForQueryIncremental",
                ),
              );
            if (!t || 0 == t.length) {
              W.CompleteBackfill("resize_image"),
                console.log("Compelted the backfill");
              break;
            }
            e += t.length;
            for (let e = 0; e < t.length; ++e) {
              let n = t[e],
                a = W.CreateOrGetBackfillProgess(n.unique_id);
              if (!n.announcement_gid || 0 == n.announcement_gid.length) {
                (a.bSkipped = !0),
                  (a.bWarning = !0),
                  W.CloseProgress(n.unique_id, a);
                continue;
              }
              if (
                (await H.O3.LoadPartnerEventFromAnnoucementGID(
                  Number(n.appid),
                  n.announcement_gid,
                  100,
                ).catch((e) => {
                  this.HandleErrorFatal(
                    n.announcement_gid,
                    e,
                    "LoadPartnerEventFromAnnoucementGID",
                    a,
                  );
                }),
                a.bFailed)
              )
                continue;
              let r = H.O3.GetClanEventFromAnnouncementGID(n.announcement_gid);
              if (r)
                if (a.bSucceeded || a.bFailed || a.bAlreadyProcessed)
                  (a.bAlreadyProcessed = !0), W.CloseProgress(n.unique_id, a);
                else {
                  if (
                    ((a.bAnalysing = !0),
                    this.setState({
                      strInfo:
                        "Processing " +
                        W.GetBackfillGIDs().length +
                        " Appid: " +
                        r.appid +
                        " Event " +
                        r.GID +
                        " Title: " +
                        r.GetNameWithFallback(0),
                    }),
                    r.jsondata && r.jsondata.localized_capsule_image)
                  ) {
                    let e = r.jsondata.localized_capsule_image;
                    await this.HandleResizeForImageType(
                      e,
                      n,
                      a,
                      "capsule",
                      x.wI.capsule_main,
                    ).catch((e) =>
                      this.HandleErrorFatal(
                        null,
                        e,
                        "HandleResizeForImageType capsule",
                        a,
                      ),
                    );
                  }
                  if (r.jsondata && r.jsondata.localized_title_image) {
                    let e = r.jsondata.localized_title_image;
                    await this.HandleResizeForImageType(
                      e,
                      n,
                      a,
                      "background",
                      x.wI.background_mini,
                    ).catch((e) =>
                      this.HandleErrorFatal(
                        null,
                        e,
                        "HandleResizeForImageType background",
                        a,
                      ),
                    );
                  }
                  if (r.jsondata && r.jsondata.localized_spotlight_image) {
                    let e = r.jsondata.localized_spotlight_image;
                    await this.HandleResizeForImageType(
                      e,
                      n,
                      a,
                      "spotlight",
                      x.wI.spotlight_main,
                    ).catch((e) =>
                      this.HandleErrorFatal(
                        null,
                        e,
                        "HandleResizeForImageType spotlight",
                        a,
                      ),
                    );
                  }
                  if (
                    (W.CloseProgress(n.unique_id, a),
                    !W.BIsBackkFillInProgress())
                  )
                    break;
                }
              else
                (a.bFailed = !0),
                  (a.strMessage = "Failed to load the event: " + n.unique_id),
                  W.CloseProgress(n.unique_id, a);
            }
            if (W.m_nFailures > 5e3) {
              console.log("Hit too many errors, stoppinng the backfill");
              break;
            }
          }
        }
        RenderFailure() {
          let e = new Array();
          return (
            W.m_nFailures > 0 &&
              W.GetBackfillGIDs().forEach((t) => {
                let n = W.GetEventBackfillProgress().get(t);
                if (n && n.bFailed) {
                  let a = H.O3.GetClanEventModel(t);
                  a &&
                    e.push(
                      u.createElement(
                        "div",
                        { key: t },
                        u.createElement(
                          Q.tj,
                          { eventModel: a, route: Q.PH.k_eView },
                          a.GetNameWithFallback(0),
                        ),
                        u.createElement(
                          "div",
                          { className: V.Error },
                          n.strMessage,
                        ),
                      ),
                    );
                }
              }),
            e
          );
        }
        RenderResizeProgress() {
          let e = new Array();
          return (
            e.push(
              u.createElement(
                "div",
                { key: "res_capsule" },
                "Capsule Resized: ",
                this.m_mapArtworkResizeSuccess.get("capsule"),
                " ",
              ),
            ),
            e.push(
              u.createElement(
                "div",
                { key: "res_header" },
                "Header Resized: ",
                this.m_mapArtworkResizeSuccess.get("background"),
                " ",
              ),
            ),
            e.push(
              u.createElement(
                "div",
                { key: "res_spotlightr" },
                "Spotlight Resized: ",
                this.m_mapArtworkResizeSuccess.get("spotlight"),
                " ",
              ),
            ),
            e
          );
        }
        render() {
          let e = this.RenderFailure(),
            t = this.m_mapArtworkResizeSuccess.has("capsule")
              ? this.RenderResizeProgress()
              : void 0;
          return u.createElement(
            "div",
            null,
            u.createElement(
              "h2",
              null,
              "Partner Events Backfill Processing Page",
            ),
            null == this.state.eBackfillState &&
              u.createElement(
                "div",
                null,
                u.createElement(
                  "button",
                  { onClick: this.OnArtworkResizeBackfill },
                  "Begin Artwork Resize Backfill",
                ),
              ),
            u.createElement(
              "div",
              null,
              u.createElement(
                "button",
                { onClick: () => W.CompleteBackfill("resize_image") },
                "Stop Backfill",
              ),
            ),
            this.state.strInfo &&
              u.createElement("div", null, "Processing: ", this.state.strInfo),
            u.createElement("div", null, "Events Processed: ", W.m_nProcessed),
            u.createElement("div", null, "Events Succeeded: ", W.m_nSuccesses),
            u.createElement("div", null, "Events Warning: ", W.m_nWarning),
            u.createElement("div", null, "Events Failed: ", W.m_nFailures),
            u.createElement("div", null, "Events Skipped: ", W.m_nSkipped),
            e.length > 0 &&
              u.createElement(
                u.Fragment,
                null,
                u.createElement("h2", null, "Failure Info"),
                e,
              ),
            Boolean(t) &&
              u.createElement(
                "div",
                null,
                u.createElement("h2", null, "Resizing Actions"),
                t,
              ),
            "started" == this.state.eBackfillState &&
              u.createElement(C.t, {
                size: "medium",
                position: "center",
                string: "Backfill In Progress",
              }),
          );
        }
      };
      (0, O.Cg)([N.oI], J.prototype, "OnArtworkResizeBackfill", null),
        (0, O.Cg)([N.oI], J.prototype, "BeginArtworkResize", null),
        (J = (0, O.Cg)([m.PA], J));
      var Z = n(65946),
        $ = n(92298),
        ee = n.n($),
        te = n(47237),
        ne = n(22837),
        ae = n(77516),
        re = n(27543);
      const se = n(87937),
        ie = ["mod_reviewed", "auto_migrated"];
      class oe {
        static s_Singleton;
        selectedTags = void 0;
        excludedTags = void 0;
        filterDate = void 0;
        filterDateAsString = void 0;
        eventsToLoadPerPaging = 20;
        filterEventTypes = void 0;
        bOrderByVisibilityStartTime = !1;
        bUseCustomQuery = !1;
        static Get() {
          return oe.s_Singleton || (oe.s_Singleton = new oe()), oe.s_Singleton;
        }
        constructor() {
          (0, z.Gn)(this);
        }
        Init(e) {
          const t = new URLSearchParams(window.location.search);
          let n;
          t.has("selectedTags") &&
            (n = t
              .getAll("selectedTags")
              .filter(Boolean)
              .map((e) => ({ label: e, value: e })));
          let a,
            r,
            s = !1,
            i = ie.map((e) => ({ label: e, value: e }));
          t.has("excludedTags") &&
            ((i = t
              .getAll("excludedTags")
              .filter(Boolean)
              .map((e) => ({ label: e, value: e }))),
            (s = i?.length > 0)),
            t.has("eventtype") &&
              (a = t
                .getAll("eventtype")
                .filter(Boolean)
                .map((e) => {
                  const n = Number.parseInt(t.get("eventtype"));
                  return { label: (0, re.rG)(n), value: n };
                })),
            t.has("filterDate") &&
              t.get("filterDate")?.length > 0 &&
              (r = se.unix(Number(t.get("filterDate"))));
          let o = !1;
          t.has("orderByVisibility") &&
            t.get("orderByVisibility")?.length > 0 &&
            (o = Boolean(t.get("orderByVisibility"))),
            (0, z.h5)(() => {
              (this.selectedTags = n),
                (this.excludedTags = i),
                (this.filterEventTypes = a),
                (this.filterDate = r),
                (this.bOrderByVisibilityStartTime = o),
                (this.bUseCustomQuery =
                  (n && n.length > 0) || s || (a && a.length > 0));
            });
        }
      }
      var le;
      (0, O.Cg)([z.sH], oe.prototype, "selectedTags", void 0),
        (0, O.Cg)([z.sH], oe.prototype, "excludedTags", void 0),
        (0, O.Cg)([z.sH], oe.prototype, "filterDate", void 0),
        (0, O.Cg)([z.sH], oe.prototype, "filterDateAsString", void 0),
        (0, O.Cg)([z.sH], oe.prototype, "eventsToLoadPerPaging", void 0),
        (0, O.Cg)([z.sH], oe.prototype, "filterEventTypes", void 0),
        (0, O.Cg)([z.sH], oe.prototype, "bOrderByVisibilityStartTime", void 0),
        (0, O.Cg)([z.sH], oe.prototype, "bUseCustomQuery", void 0),
        (function (e) {
          (e[(e.k_ModReviewed = 0)] = "k_ModReviewed"),
            (e[(e.k_ModUnreviewed = 1)] = "k_ModUnreviewed"),
            (e[(e.k_ChangeEventType = 2)] = "k_ChangeEventType"),
            (e[(e.k_UpdateSeasonTags = 3)] = "k_UpdateSeasonTags"),
            (e[(e.k_ModReReviewed = 4)] = "k_ModReReviewed"),
            (e[(e.k_ModRemovedFromSteamChina = 5)] =
              "k_ModRemovedFromSteamChina"),
            (e[(e.k_ModFlagAdultOnlyContent = 6)] =
              "k_ModFlagAdultOnlyContent"),
            (e[(e.k_ModRemoveAdultOnlyContent = 7)] =
              "k_ModRemoveAdultOnlyContent"),
            (e[(e.k_ModFlagHalloweenEvent = 8)] = "k_ModFlagHalloweenEvent"),
            (e[(e.k_ModRemoveHalloweenEvent = 9)] =
              "k_ModRemoveHalloweenEvent");
        })(le || (le = {}));
      const ce = "ModAct";
      class de {
        m_moderator;
        m_rtWhen;
        m_action;
        m_newEventType;
        m_newTagAdded;
        ToModString() {
          let e =
            ce +
            "_" +
            this.m_moderator +
            "_" +
            Math.floor(this.m_rtWhen) +
            "_" +
            this.m_action;
          switch (this.m_action) {
            case le.k_ChangeEventType:
              e += "_" + this.m_newEventType;
              break;
            case le.k_UpdateSeasonTags:
              e += "_" + this.m_newTagAdded;
          }
          return e;
        }
        FromString(e) {
          let t = e.split("_");
          if (!t || t[0] !== ce) return !1;
          switch (
            ((this.m_moderator = Number(t[1])),
            (this.m_rtWhen = Number(t[2])),
            (this.m_action = Number(t[3])),
            this.m_action)
          ) {
            case le.k_ChangeEventType:
              this.m_newEventType = Number(t[4]);
              break;
            case le.k_UpdateSeasonTags:
              this.m_newTagAdded = t.slice(4).join("_");
          }
          return !0;
        }
        SetActionChangeEvent(e) {
          return (
            (this.m_moderator = s.iA.accountid),
            (this.m_rtWhen = Date.now() / 1e3),
            (this.m_action = le.k_ChangeEventType),
            (this.m_newEventType = e),
            this
          );
        }
        SetReviewAction(e) {
          return (
            (this.m_moderator = s.iA.accountid),
            (this.m_rtWhen = Date.now() / 1e3),
            (this.m_action = e ? le.k_ModReviewed : le.k_ModUnreviewed),
            this
          );
        }
        SetAdultOnlyContentAction(e) {
          return (
            (this.m_moderator = s.iA.accountid),
            (this.m_rtWhen = Date.now() / 1e3),
            (this.m_action = e
              ? le.k_ModFlagAdultOnlyContent
              : le.k_ModRemoveAdultOnlyContent),
            this
          );
        }
        SetHalloweenEventTypeAction(e) {
          return (
            (this.m_moderator = s.iA.accountid),
            (this.m_rtWhen = Date.now() / 1e3),
            (this.m_action = e
              ? le.k_ModFlagHalloweenEvent
              : le.k_ModRemoveHalloweenEvent),
            this
          );
        }
        SetReReviewAction(e) {
          return (
            (this.m_moderator = s.iA.accountid),
            (this.m_rtWhen = Date.now() / 1e3),
            (this.m_action = e ? le.k_ModReReviewed : le.k_ModUnreviewed),
            this
          );
        }
        static IsAuditAction(e) {
          return e.startsWith(ce);
        }
        SetUpdateSeasonalTags(e) {
          return (
            (this.m_moderator = s.iA.accountid),
            (this.m_rtWhen = Date.now() / 1e3),
            (this.m_action = le.k_UpdateSeasonTags),
            (this.m_newTagAdded = e),
            this
          );
        }
      }
      class me {
        static s_Singleton;
        m_mapEventGIDToSolrData = new Map();
        m_listEvents = new Array();
        BHasSolrEvent(e) {
          return this.m_mapEventGIDToSolrData.has(e);
        }
        GetAllSolrEvents() {
          return this.m_listEvents;
        }
        static Get() {
          return me.s_Singleton || (me.s_Singleton = new me()), me.s_Singleton;
        }
        constructor() {
          (0, z.Gn)(this);
        }
        ClearAllSolrEvents() {
          (this.m_mapEventGIDToSolrData = new Map()),
            (this.m_listEvents = new Array());
        }
        async LoadPartnerEventForModerationIncremental(e, t = 30) {
          const n =
            s.TS.STORE_BASE_URL +
            "events_admin/ajaxgetmoderationspecificpartnerevents";
          let a = 0;
          if (this.m_listEvents?.length) {
            this.m_listEvents.forEach(
              (e) =>
                (a = Math.max(
                  a,
                  Math.floor(Date.parse(e.last_modified_date) / 1e3),
                )),
            );
            this.m_listEvents.filter(
              (e) => Math.floor(Date.parse(e.last_modified_date) / 1e3) == a,
            ).length >= t && a++;
          }
          const r = { start_time: a, count: t };
          try {
            const t = await o().get(n, {
              params: r,
              withCredentials: !0,
              cancelToken: e ? e.token : void 0,
            });
            if (e && e.token.reason) return [];
            if (t && t.data) {
              let e = new Array();
              return (
                (0, z.h5)(() => {
                  t.data.docs.forEach((t) => {
                    this.m_mapEventGIDToSolrData.has(t.unique_id) ||
                      (e.push(t),
                      this.m_mapEventGIDToSolrData.set(t.unique_id, t),
                      this.m_listEvents.push(t));
                  });
                }),
                e
              );
            }
          } catch (e) {
            const t = (0, l.H)(e);
            console.error(
              "LoadPartnerEventForModerationIncremental failed:" +
                t.strErrorMsg,
              t,
            );
          }
          return [];
        }
        async UpdateTagsOnPartnerEvent(e, t, n, a, r, i) {
          const l = s.TS.STORE_BASE_URL + "events_admin/ajaxupdatetags";
          let c = a.join(",");
          i && (a.length > 0 && (c += ","), (c += i.ToModString()));
          const d = new FormData();
          d.append("sessionid", s.TS.SESSIONID),
            d.append("clan_accountid", "" + t.GetAccountID()),
            d.append("gid_announcement", n),
            d.append("add_tags", c),
            d.append("remove_tags", r.join(","));
          return (
            await o().post(l, d, { withCredentials: !0, cancelToken: e.token })
          ).data.tags;
        }
        async UpdatePartnerEventType(e, t, n, a) {
          const r = s.TS.STORE_BASE_URL + "events_admin/ajaxupdateeventtype",
            i = new FormData();
          i.append("sessionid", s.TS.SESSIONID),
            i.append("clan_accountid", "" + t.GetAccountID()),
            i.append("gid_event", n),
            i.append("new_event_type", "" + a),
            await o().post(r, i, { withCredentials: !0, cancelToken: e.token });
        }
      }
      (0, O.Cg)([z.sH], me.prototype, "m_mapEventGIDToSolrData", void 0),
        (0, O.Cg)([z.sH], me.prototype, "m_listEvents", void 0),
        (0, O.Cg)([z.XI], me.prototype, "ClearAllSolrEvents", null);
      var ue = n(82097),
        pe = n(81301),
        ge = n(91675),
        _e = n(61311),
        he = n(14336);
      function ve(e) {
        const { accountID: t, locToken: n } = e,
          a = u.useMemo(() => g.b.InitFromAccountID(t), [t]),
          { data: r } = (0, he.js)(t);
        let i =
          "https://steamsupport.valvesoftware.com/account/overview/" +
          a.ConvertTo64BitString();
        return u.createElement(
          "div",
          null,
          (0, f.PP)(
            n,
            u.createElement(
              "a",
              { href: i, target: s.TS.IN_CLIENT ? void 0 : "_blank" },
              Boolean(r)
                ? u.createElement(u.Fragment, null, r.m_strPlayerName)
                : u.createElement(
                    u.Fragment,
                    null,
                    u.createElement("span", null, t),
                  ),
            ),
          ),
        );
      }
      function Se(e) {
        const { modAction: t } = e,
          n =
            (0, f.TW)(t.m_rtWhen) +
            " @ " +
            (0, ge.KC)(t.m_rtWhen, { bForce24HourClock: !1 }),
          a = u.createElement(ve, {
            locToken: "#EventModTile_Moderator",
            accountID: t.m_moderator,
          });
        switch (t.m_action) {
          case le.k_ModReviewed:
            return u.createElement(
              "div",
              { className: _e.ModeratorAuditActionCtn },
              (0, f.PP)(
                "#EventModTile_Action_Reviewed",
                u.createElement("span", null, n),
                a,
              ),
            );
          case le.k_ModUnreviewed:
            return u.createElement(
              "div",
              { className: _e.ModeratorAuditActionCtn },
              (0, f.PP)(
                "#EventModTile_Action_UnReviewed",
                u.createElement("span", null, n),
                a,
              ),
            );
          case le.k_ChangeEventType:
            return u.createElement(
              "div",
              { className: _e.ModeratorAuditActionCtn },
              (0, f.PP)(
                "#EventModTile_Action_NewEventType",
                u.createElement("span", null, n),
                a,
                (0, re.rG)(t.m_newEventType),
              ),
            );
          case le.k_UpdateSeasonTags:
            return u.createElement(
              "div",
              { className: _e.ModeratorAuditActionCtn },
              (0, f.PP)(
                "#EventModTile_Action_SeasonTagUpdate",
                u.createElement("span", null, n),
                a,
                t.m_newTagAdded,
              ),
            );
          case le.k_ModReReviewed:
            return u.createElement(
              "div",
              { className: _e.ModeratorAuditActionCtn },
              (0, f.PP)(
                "#EventModTile_Action_ReReviewed",
                u.createElement("span", null, n),
                a,
              ),
            );
          case le.k_ModRemovedFromSteamChina:
            return u.createElement(
              "div",
              { className: _e.ModeratorAuditActionCtn },
              (0, f.PP)(
                "#EventModTile_Action_RemoveFromSC",
                u.createElement("span", null, n),
                a,
              ),
            );
          case le.k_ModFlagAdultOnlyContent:
            return u.createElement(
              "div",
              { className: _e.ModeratorAuditActionCtn },
              (0, f.PP)(
                "#EventModTile_Action_FlagAdultContent",
                u.createElement("span", null, n),
                a,
              ),
            );
          case le.k_ModRemoveAdultOnlyContent:
            return u.createElement(
              "div",
              { className: _e.ModeratorAuditActionCtn },
              (0, f.PP)(
                "#EventModTile_Action_RemoveAdultContent",
                u.createElement("span", null, n),
                a,
              ),
            );
          default:
            return u.createElement(
              "div",
              { className: _e.ModeratorAuditActionCtn },
              t.ToModString(),
            );
        }
      }
      function Ee(e) {
        const [t, n] = u.useState(!0),
          { eventModel: a } = e;
        let r = a
          .GetAllTags()
          .filter((e) => de.IsAuditAction(e))
          .reverse();
        const s = r.length,
          i = r.length > 3 && t;
        return 0 == r.length
          ? null
          : (i && (r = r.splice(0, 3)),
            u.createElement(
              "div",
              null,
              u.createElement(
                "h4",
                null,
                (0, f.we)("#EventModTile_Action_Title"),
              ),
              ((t) => {
                const { eventModel: n } = e;
                return t.map((e) => {
                  const t = new de();
                  return (
                    t.FromString(e),
                    u.createElement(Se, { key: n.GID + e, modAction: t })
                  );
                });
              })(r),
              i &&
                u.createElement(
                  "a",
                  { onClick: () => n(!1), className: _e.ExpandModActions },
                  (0, f.we)("#EventModTile_Action_More", s - 3),
                ),
              Boolean(!i && s > 3) &&
                u.createElement(
                  "a",
                  { onClick: () => n(!0), className: _e.ExpandModActions },
                  (0, f.we)("#EventModTile_Action_Hide"),
                ),
            ));
      }
      var we = n(67417),
        Ce = n(95695),
        be = n.n(Ce),
        Me = n(37076),
        Ae = n(3088),
        ye = n(51272),
        fe = n(61336),
        Re = n(961),
        Te = n(44165);
      const Be = n(87937),
        Ie = {
          bExhaustedEventList: !1,
          bInfiniteScrollLoading: !0,
          nLastFetchCompletedMS: 0,
        };
      let Pe = class extends u.Component {
        m_cancelSignal = o().CancelToken.source();
        m_refScroll = u.createRef();
        m_IntervalTimer = void 0;
        state = {
          bInfiniteScrollLoading: !1,
          bExhaustedEventList: !1,
          nLastFetchCompletedMS: 0,
        };
        m_nPage = 0;
        componentDidMount() {
          this.setState(
            { bInfiniteScrollLoading: !0 },
            this.LoadMoreModerationEvents,
          ),
            window.addEventListener("scroll", this.OnScroll, !0),
            oe.Get().Init(this.props.history.location.search);
        }
        componentWillUnmount() {
          this.m_cancelSignal.cancel(
            "EventModerationLanding component unmounted",
          ),
            window.removeEventListener("scroll", this.OnScroll),
            this.ClearTimer();
        }
        HandleUpdateQueryParameter() {
          const e = oe.Get();
          if (e.bUseCustomQuery) {
            const {
              selectedTags: t,
              excludedTags: n,
              filterEventTypes: a,
              filterDate: r,
              bOrderByVisibilityStartTime: s,
            } = e;
            if (t || n || a || r || s) {
              const e = new URLSearchParams();
              t?.forEach((t) => e.append("selectedTags", t.value)),
                n?.forEach((t) => e.append("excludedTags", t.value)),
                a?.forEach((t) => e.append("eventtype", "" + t.value)),
                r?.unix() > 0 && e.append("filterDate", "" + r.unix()),
                s && e.append("orderByVisibility", "1"),
                this.props.history.push(`?${e.toString()}`);
            } else this.props.history.push("?");
          }
        }
        ClearTimer() {
          this.m_IntervalTimer &&
            (window.clearInterval(this.m_IntervalTimer),
            (this.m_IntervalTimer = void 0));
        }
        HandleError(e) {
          let t = (0, l.H)(e);
          console.error("EventModerationLanding error: " + t.strErrorMsg, t),
            this.setState({
              bInfiniteScrollLoading: !1,
              bExhaustedEventList: !0,
              nLastFetchCompletedMS: Date.now(),
            });
        }
        async LoadMorePublicEventWithDelay() {
          this.m_IntervalTimer = window.setInterval(
            this.LoadMoreModerationEvents,
            500,
          );
        }
        LoadMoreModerationEvents() {
          if ((this.ClearTimer(), this.state.bInfiniteScrollLoading)) {
            let e;
            const t = oe.Get();
            if (t.bUseCustomQuery) {
              let n = t.filterEventTypes
                  ? t.filterEventTypes.map((e) => e.value)
                  : void 0,
                a = t.selectedTags
                  ? t.selectedTags.map((e) => e.value)
                  : void 0,
                r = t.excludedTags
                  ? t.excludedTags.map((e) => e.value)
                  : void 0;
              e = q
                .Get()
                .LoadPartnerEventForQueryIncremental(
                  this.m_cancelSignal,
                  this.m_nPage,
                  t.eventsToLoadPerPaging,
                  [this.props.appid],
                  a,
                  r,
                  t.filterDate,
                  n,
                  t.bOrderByVisibilityStartTime,
                );
            } else
              e = me
                .Get()
                .LoadPartnerEventForModerationIncremental(
                  this.m_cancelSignal,
                  t.eventsToLoadPerPaging,
                );
            e.then((e) => {
              (this.m_nPage += t.eventsToLoadPerPaging),
                this.setState({
                  bInfiniteScrollLoading: !1,
                  bExhaustedEventList: 0 == e.length,
                  nLastFetchCompletedMS: Date.now(),
                });
            }).catch((e) => this.HandleError(e));
          }
        }
        UpdateQueryParametersAndLoadMoreEvents() {
          this.HandleUpdateQueryParameter(), this.LoadMoreModerationEvents();
        }
        RenderTiles() {
          let e = new Array();
          return (
            (oe.Get().bUseCustomQuery
              ? q.Get().GetAllSolrEvents()
              : me.Get().GetAllSolrEvents()
            ).forEach((t) => {
              e.push(u.createElement(Oe, { solrData: t, key: t.unique_id }));
            }),
            e
          );
        }
        OnScroll() {
          if (!this.m_refScroll || !this.m_refScroll.current) return;
          let e = this.m_refScroll.current;
          e &&
            (this.state.bExhaustedEventList ||
              this.state.bInfiniteScrollLoading ||
              (e.getBoundingClientRect().bottom <= window.innerHeight + 50 &&
                (this.state.nLastFetchCompletedMS + 500 < Date.now()
                  ? this.setState(
                      { bInfiniteScrollLoading: !0 },
                      this.LoadMorePublicEventWithDelay,
                    )
                  : this.setState(
                      { bInfiniteScrollLoading: !0 },
                      this.LoadMoreModerationEvents,
                    ))));
        }
        RefetchAllEventTiles() {
          (this.m_nPage = 0),
            me.Get().ClearAllSolrEvents(),
            q.Get().ClearAllSolrEvents(),
            this.setState(
              { ...Ie },
              this.UpdateQueryParametersAndLoadMoreEvents,
            );
        }
        render() {
          let e = this.RenderTiles();
          const t = oe.Get();
          return u.createElement(
            "div",
            { className: Re.ModerationContainer, ref: this.m_refScroll },
            u.createElement(
              "div",
              null,
              u.createElement("h2", null, (0, f.we)("#EventModeration_Title")),
              u.createElement(
                v.tH,
                null,
                u.createElement(
                  "div",
                  { className: (0, A.A)(be().FlexRowContainer) },
                  u.createElement(Ge, {
                    fnRequireRefetchEvents: this.RefetchAllEventTiles,
                  }),
                  Boolean(t.bUseCustomQuery) &&
                    u.createElement(Fe, {
                      fnRequireRefetchEvents: this.RefetchAllEventTiles,
                    }),
                ),
              ),
            ),
            u.createElement(v.tH, null, e),
            this.state.bInfiniteScrollLoading &&
              u.createElement(C.t, {
                position: "center",
                size: "medium",
                string: (0, f.we)("#Loading"),
              }),
          );
        }
      };
      (0, O.Cg)([N.oI], Pe.prototype, "HandleError", null),
        (0, O.Cg)([N.oI], Pe.prototype, "LoadMorePublicEventWithDelay", null),
        (0, O.Cg)([N.oI], Pe.prototype, "LoadMoreModerationEvents", null),
        (0, O.Cg)(
          [N.oI],
          Pe.prototype,
          "UpdateQueryParametersAndLoadMoreEvents",
          null,
        ),
        (0, O.Cg)([N.oI], Pe.prototype, "OnScroll", null),
        (0, O.Cg)([N.oI], Pe.prototype, "RefetchAllEventTiles", null),
        (Pe = (0, O.Cg)([m.PA], Pe));
      const De = (0, p.y)(Pe),
        Ge = (0, m.PA)((e) => {
          const t = oe.Get(),
            { fnRequireRefetchEvents: n } = e;
          return u.createElement(
            u.Fragment,
            null,
            u.createElement(
              "div",
              { className: Re.FilterContainer },
              u.createElement(
                b.he,
                {
                  toolTipContent: (0, f.we)(
                    "#EventModeration_ShowCustomFilter_ttip",
                  ),
                },
                u.createElement(h.Yh, {
                  label: (0, f.we)("#EventModeration_ShowCustomFilter"),
                  checked: t.bUseCustomQuery,
                  onChange: (e) => {
                    (t.bUseCustomQuery = e), n();
                  },
                }),
              ),
            ),
            u.createElement(
              "div",
              { className: Re.FilterContainer },
              u.createElement(
                "label",
                { htmlFor: "EventPerLoad" },
                (0, f.we)("#EventModeration_PerPageLoad"),
              ),
              u.createElement(
                "div",
                null,
                u.createElement("input", {
                  type: "number",
                  id: "EventPerLoad",
                  min: "10",
                  max: "200",
                  value: t.eventsToLoadPerPaging,
                  onChange: (e) => {
                    let n = Number.parseInt(e.currentTarget.value);
                    n &&
                      n > 0 &&
                      n != t.eventsToLoadPerPaging &&
                      (t.eventsToLoadPerPaging = n);
                  },
                }),
              ),
            ),
          );
        }),
        Fe = (0, m.PA)((e) => {
          const t = oe.Get(),
            { fnRequireRefetchEvents: n } = e,
            a = ne.Zi.map((e) => ({ value: e, label: (0, re.rG)(e) })).sort(
              (e, t) => e.label.localeCompare(t.label),
            ),
            r = ae.FZ.map((e) => ({ value: e, label: e })).sort((e, t) =>
              e.label.localeCompare(t.label),
            ),
            s = { option: (e) => ({ ...e, color: "#444444" }) };
          return u.createElement(
            u.Fragment,
            null,
            u.createElement(
              "div",
              { className: Re.FilterContainer },
              u.createElement(
                "span",
                null,
                (0, f.we)("#EventModeration_FilterByTag"),
              ),
              u.createElement(te.Ay, {
                isSearchable: !0,
                isMulti: !0,
                onChange: (e) => {
                  (t.selectedTags = e), n();
                },
                value: t.selectedTags,
                options: r,
                styles: s,
              }),
            ),
            u.createElement(
              "div",
              { className: Re.FilterContainer },
              u.createElement(
                "span",
                null,
                (0, f.we)("#EventModeration_FilterExcludeByTag"),
              ),
              u.createElement(te.Ay, {
                isSearchable: !0,
                isMulti: !0,
                onChange: (e) => {
                  (t.excludedTags = e), n();
                },
                value: t.excludedTags,
                options: r,
                styles: s,
              }),
            ),
            u.createElement(
              "div",
              { className: Re.FilterContainer },
              u.createElement(
                "span",
                null,
                (0, f.we)("#EventModeration_FilterToType"),
              ),
              u.createElement(te.Ay, {
                isSearchable: !0,
                isMulti: !0,
                onChange: (e) => {
                  (t.filterEventTypes = e), n();
                },
                value: t.filterEventTypes,
                options: a,
                styles: s,
              }),
            ),
            u.createElement(
              "div",
              { className: Re.FilterContainer },
              u.createElement(
                "span",
                null,
                (0, f.we)("#EventModeration_FilterToDate"),
              ),
              u.createElement(ee(), {
                timeFormat: !1,
                onChange: (e) => {
                  if ("string" == typeof e) {
                    let n = Be(e, "M/D/YYYY", !0);
                    if (!n.isValid()) return void (t.filterDateAsString = e);
                    e = n;
                  }
                  t.filterDate != e &&
                    ((t.filterDateAsString = void 0), (t.filterDate = e), n());
                },
                value: t.filterDate,
                isValidDate: (e) => {
                  let t = new Date();
                  return (
                    e.unix() <
                    Be.unix(t.getTime() / 1e3 + 86400)
                      .hour(0)
                      .seconds(0)
                      .minute(0)
                      .unix()
                  );
                },
                inputProps: {
                  placeholder: (0, f.we)("#EventModeration_PickDatee"),
                  className: Re.TimeWidth,
                },
              }),
            ),
            u.createElement(
              "div",
              { className: Re.FilterContainer },
              u.createElement("input", {
                type: "checkbox",
                id: "VisibilityStart",
                checked: t.bOrderByVisibilityStartTime,
                onChange: (e) => {
                  (t.bOrderByVisibilityStartTime = e.currentTarget.checked),
                    n();
                },
              }),
              u.createElement(
                "label",
                { htmlFor: "VisibilityStart" },
                (0, f.we)("#EventModeration_OrderByFirstVisible"),
              ),
            ),
          );
        }),
        Le = (0, m.PA)((e) => {
          const { onClick: t, event: n, bSaving: a } = e;
          let r = (0, f.we)("#EventModTile_Moderate_ClearReviewed"),
            s = Re.EventModerateClearReview,
            i = !1;
          return (
            (0, ae.Xx)(n) ||
              ((r = (0, f.we)("#EventModTile_Moderate_MarkReviewed")),
              (s = Re.EventModerateMarkReview),
              (i = !0)),
            a &&
              ((r = (0, f.we)("#EventModTile_Moderate_Saving")),
              (s = Re.EventModerateSaving)),
            u.createElement(
              "button",
              {
                className: (0, A.A)(be().Button, Re.Button, s),
                onClick: () => t(i),
                disabled: a,
              },
              a && u.createElement(C.t, { size: "small" }),
              r,
            )
          );
        }),
        ke = (0, m.PA)((e) => {
          const { onClick: t, event: n, bSaving: a } = e,
            r = n.BHasTag("adult_only_content");
          let s = (0, f.we)(
            r
              ? "#EventModTile_Moderate_RemoveAdultContent"
              : "#EventModTile_Moderate_FlagAdultContent",
          );
          return (
            a && (s = (0, f.we)("#EventModTile_Moderate_Saving")),
            u.createElement(
              "button",
              {
                className: (0, A.A)(be().Button, Re.Button),
                onClick: () => t(!r),
                disabled: a,
              },
              a && u.createElement(C.t, { size: "small" }),
              s,
            )
          );
        });
      function Ue(e) {
        const { onClick: t, event: n, bSaving: a } = e,
          r = (0, Z.q3)(() => n.BHasTag("halloween"));
        let s = (0, f.we)(
          r
            ? "#EventModTile_Moderate_RemoveHalloweenFlag"
            : "#EventModTile_Moderate_FlagHalloween",
        );
        a && (s = (0, f.we)("#EventModTile_Moderate_Saving"));
        const i = Te.HD.GetTimeNowWithOverrideAsDate();
        return i.getMonth() >= 8 && i.getMonth() <= 10
          ? u.createElement(
              "button",
              {
                className: (0, A.A)(be().Button, Re.Button),
                onClick: () => t(!r),
                disabled: a,
              },
              a && u.createElement(C.t, { size: "small" }),
              s,
            )
          : null;
      }
      let Oe = class extends u.Component {
        state = {
          bLoadingEvent: !H.O3.BHasClanEventModel(
            this.props.solrData.unique_id,
          ),
          bShowAsModal: !1,
          bSavingModeration: !1,
        };
        m_cancelSignal = o().CancelToken.source();
        componentDidMount() {
          const { solrData: e } = this.props,
            t = e.unique_id;
          H.O3.BHasClanEventModel(t) ||
            H.O3.LoadHiddenPartnerEvent(new g.b(e.clan_steamid), t)
              .then(() => this.setState({ bLoadingEvent: !1 }))
              .catch((e) => {
                const t = (0, l.H)(e);
                console.error(
                  "EventModerationTile: Event Load: " + t.strErrorMsg,
                  t,
                ),
                  this.setState({ bLoadingEvent: !1 });
              });
        }
        componentWillUnmount() {
          this.m_cancelSignal.cancel("EventModerationTile component unmounted");
        }
        ShowModalEvent(e) {
          const { solrData: t } = this.props,
            n = t.unique_id;
          !this.state.bLoadingEvent &&
            H.O3.BHasClanEventModel(n) &&
            this.setState({ bShowAsModal: !0 }),
            e.preventDefault(),
            e.stopPropagation();
        }
        HideModalEvent() {
          this.state.bShowAsModal && this.setState({ bShowAsModal: !1 });
        }
        SetAdultContentState(e) {
          if (this.state.bSavingModeration) return;
          const { solrData: t } = this.props,
            n = t.unique_id,
            a = H.O3.GetClanEventModel(n);
          if (!a) return;
          if (e === a.BHasTag("adult_only_content")) return;
          const r = new Array(),
            s = new Array();
          let i = new de().SetAdultOnlyContentAction(e);
          e ? r.push("adult_only_content") : s.push("adult_only_content"),
            this.UpdateTagsOnEvent(n, r, s, i);
        }
        SetHalloweenEventState(e) {
          if (this.state.bSavingModeration) return;
          const { solrData: t } = this.props,
            n = t.unique_id,
            a = H.O3.GetClanEventModel(n);
          if (!a) return;
          if (e === a.BHasTag("halloween")) return;
          const r = new Array(),
            s = new Array();
          let i = new de().SetHalloweenEventTypeAction(e);
          e ? r.push("halloween") : s.push("halloween"),
            this.UpdateTagsOnEvent(n, r, s, i);
        }
        SetModeratedState(e) {
          if (this.state.bSavingModeration) return;
          const { solrData: t } = this.props,
            n = t.unique_id,
            a = H.O3.GetClanEventModel(n);
          if (!a) return;
          if (e === (0, ae.Xx)(a)) return;
          const r = new Array(),
            s = new Array();
          let i = new de().SetReviewAction(e);
          e
            ? (r.push("mod_reviewed"),
              s.push("mod_require_rereview"),
              a.BHasTag("mod_require_rereview") && i.SetReReviewAction(e))
            : r.push("mod_require_rereview"),
            this.UpdateTagsOnEvent(n, r, s, i);
        }
        UpdateTagsOnEvent(e, t, n, a) {
          this.state.bSavingModeration ||
            this.setState({ bSavingModeration: !0 }, async () => {
              let r = H.O3.GetClanEventModel(e);
              try {
                let e = await me
                  .Get()
                  .UpdateTagsOnPartnerEvent(
                    this.m_cancelSignal,
                    r.clanSteamID,
                    r.AnnouncementGID,
                    t,
                    n,
                    a,
                  );
                r.vecTags = e;
              } catch (e) {
                let t = (0, l.H)(e);
                console.error("UpdateTagsOnPartnerEvent " + t.strErrorMsg, t);
              }
              this.setState({ bSavingModeration: !1 });
            });
        }
        OnChangeCategory(e) {
          const { solrData: t } = this.props;
          let n = H.O3.GetClanEventModel(t.unique_id);
          (0, E.pg)(u.createElement(qe, { eventModel: n }), (0, y.uX)(e));
        }
        OnUpdateSeasonalTag(e) {
          const { solrData: t } = this.props;
          let n = H.O3.GetClanEventModel(t.unique_id);
          (0, E.pg)(u.createElement(xe, { eventModel: n }), (0, y.uX)(e));
        }
        render() {
          const { solrData: e } = this.props,
            t = e.unique_id,
            n = Number(e.appid);
          let a,
            r = (0, ne.sf)(s.TS.LANGUAGE),
            i = H.O3.GetClanEventModel(t),
            o = null;
          if (i) {
            this.state.bShowAsModal &&
              (o = u.createElement(
                B.of,
                { className: Re.StoreHeaderAdjust },
                u.createElement(
                  "div",
                  null,
                  u.createElement(pe.H, {
                    event: i,
                    fnClose: this.HideModalEvent,
                  }),
                ),
              ));
            const e = i.GetImageForSizeAsArrayWithFallback(
                "capsule",
                r,
                x.wI.capsule_main,
              ),
              t = i.BImageNeedScreenshotFallback("capsule", r);
            a =
              e.length > 0
                ? u.createElement(
                    u.Fragment,
                    null,
                    u.createElement(Ae.c, { rgSources: e }),
                    t &&
                      u.createElement(
                        "div",
                        { className: Re.NoCapsuleFallback },
                        (0, f.we)("#EventModTile_FallbackImageText"),
                      ),
                  )
                : u.createElement(
                    "div",
                    { className: Re.NoCapsule },
                    (0, f.we)("#EventModTile_NoCapsule"),
                  );
          } else a = (0, f.we)("#Loading");
          const l = e.last_modified_date
              ? Date.parse(e.last_modified_date) / 1e3
              : 0,
            c = i ? i.type : Number(e.event_type),
            d = new g.b(e.clan_steamid),
            m = n ? `app/${n}` : `group/${d.GetAccountID()}`,
            p = `${s.TS.STORE_BASE_URL}news/${m}/view/${e.announcement_gid}`,
            _ = Boolean(i && i.BHasTag("adult_only_content")),
            h = Boolean(i && i.BHasTag("halloween"));
          return u.createElement(
            v.tH,
            null,
            o,
            u.createElement(
              "div",
              {
                className: (0, A.A)({ [Re.Tile]: !0, [Re.HalloweenEvent]: h }),
              },
              u.createElement(
                "a",
                {
                  href: p,
                  className: Re.TileCapsule,
                  onClick: this.ShowModalEvent,
                },
                a,
              ),
              u.createElement(
                "div",
                { className: Re.TileDetails },
                u.createElement(
                  "div",
                  { className: Re.DetailsLeft },
                  u.createElement(
                    "a",
                    {
                      className: Re.EventTitle,
                      href: p,
                      onClick: this.ShowModalEvent,
                    },
                    e.event_name,
                  ),
                  u.createElement(
                    "div",
                    {
                      className: (0, A.A)(
                        Re.TileEventType,
                        1 == c ? Re.TileEventOtherType : "",
                      ),
                    },
                    i ? i.GetCategoryAsString() : e.event_type,
                  ),
                  _ &&
                    u.createElement(
                      "div",
                      { className: Re.HasAdultContent },
                      (0, f.we)("#EventModTile_HasAdultContent"),
                    ),
                  this.state.bLoadingEvent &&
                    u.createElement(C.t, {
                      size: "small",
                      string: (0, f.we)("#Loading"),
                    }),
                  u.createElement(
                    "div",
                    { className: Re.ChannelInfo },
                    u.createElement(Ne, {
                      appid: n,
                      clanSteamID: new g.b(e.clan_steamid),
                    }),
                  ),
                ),
                u.createElement(
                  "div",
                  { className: Re.DetailsMiddle },
                  i &&
                    u.createElement(
                      u.Fragment,
                      null,
                      u.createElement(Le, {
                        onClick: this.SetModeratedState,
                        bSaving: this.state.bSavingModeration,
                        event: i,
                      }),
                      u.createElement(
                        "button",
                        {
                          className: (0, A.A)(be().Button, Re.Button),
                          onClick: this.OnChangeCategory,
                        },
                        (0, f.we)("#EventModTile_ChangeEventType"),
                      ),
                      u.createElement(ke, {
                        onClick: this.SetAdultContentState,
                        bSaving: this.state.bSavingModeration,
                        event: i,
                      }),
                      u.createElement(Ue, {
                        onClick: this.SetHalloweenEventState,
                        bSaving: this.state.bSavingModeration,
                        event: i,
                      }),
                      Boolean(i.BHasTag("halloween2019candidate")) &&
                        u.createElement(
                          "button",
                          {
                            className: (0, A.A)(be().Button),
                            onClick: this.OnUpdateSeasonalTag,
                          },
                          (0, f.we)("#EventModTile_SeasonalTag"),
                        ),
                      u.createElement(Ee, { eventModel: i }),
                    ),
                ),
                u.createElement(
                  "div",
                  { className: Re.DetailsRight },
                  u.createElement(
                    "div",
                    { className: Re.EventTimingBlock },
                    Boolean(l) &&
                      u.createElement(
                        "div",
                        { className: Re.LastUpdateTime },
                        (0, f.we)(
                          "#EventModTile_LastModified",
                          (0, f.TW)(l) +
                            "@" +
                            (0, ge.KC)(l, { bForce24HourClock: !1 }),
                        ),
                      ),
                    i &&
                      u.createElement(we.j6, {
                        event: i,
                        stylesmodule: Re,
                        nOverrideEndTime: i.GetEndTimeAndDateUnixSeconds(),
                        nOverrideStartTime: i.GetStartTimeAndDateUnixSeconds(),
                      }),
                  ),
                  i &&
                    u.createElement(ze, {
                      event: i,
                      hidden: e.hidden,
                      published: e.published,
                    }),
                ),
              ),
            ),
          );
        }
      };
      (0, O.Cg)([N.oI], Oe.prototype, "ShowModalEvent", null),
        (0, O.Cg)([N.oI], Oe.prototype, "HideModalEvent", null),
        (0, O.Cg)([N.oI], Oe.prototype, "SetAdultContentState", null),
        (0, O.Cg)([N.oI], Oe.prototype, "SetHalloweenEventState", null),
        (0, O.Cg)([N.oI], Oe.prototype, "SetModeratedState", null),
        (0, O.Cg)([N.oI], Oe.prototype, "OnChangeCategory", null),
        (0, O.Cg)([N.oI], Oe.prototype, "OnUpdateSeasonalTag", null),
        (Oe = (0, O.Cg)([m.PA], Oe));
      let He = class extends u.Component {
        state = { bDownloadingImages: !1, nLocLanguages: 0 };
        m_cancelSignal = o().CancelToken.source();
        componentWillUnmount() {
          this.m_cancelSignal.cancel(
            "ChangeEventTypeDialog component unmounted",
          );
        }
        CountLanguages(e) {
          let t = 0;
          if (e && e.length > 0)
            for (let n = 0; n < e.length && n < 31; ++n)
              e[n] && e[n].length > 0 && (t += 1);
          return t;
        }
        componentDidMount() {
          const { event: e } = this.props;
          H.O3.LoadClanEventLocalizationFromAnnouncementGID(
            e.clanSteamID,
            e.AnnouncementGID,
          )
            .then((e) => {
              this.m_cancelSignal.token.reason ||
                this.setState({ nLocLanguages: e.length });
            })
            .catch((e) => {
              let t = (0, l.H)(e);
              console.error(
                "EventInspection.LoadLoc : error " + t.strErrorMsg,
                t,
              ),
                this.m_cancelSignal.token.reason ||
                  this.setState({ nLocLanguages: -1 });
            });
        }
        render() {
          const { event: e } = this.props;
          let t = this.CountLanguages(e.jsondata.localized_title_image),
            n = this.CountLanguages(e.jsondata.localized_capsule_image),
            a = this.CountLanguages(e.jsondata.localized_spotlight_image),
            r = Math.max(
              this.CountLanguages(e.jsondata.localized_broadcast_left_image),
              this.CountLanguages(e.jsondata.localized_broadcast_right_image),
            ),
            s = t + n + a + r,
            i = this.CountLanguages(e.jsondata.localized_summary),
            o = this.CountLanguages(e.jsondata.localized_subtitle);
          return u.createElement(
            "div",
            { className: Re.AnalysisCtn },
            u.createElement(
              "div",
              { className: Re.TileTitle },
              (0, f.we)("#EventModTile_Analysis"),
            ),
            u.createElement(
              "div",
              null,
              (0, f.we)("#EventModTile_Stats_Comments", e.nCommentCount),
            ),
            u.createElement(
              "div",
              null,
              (0, f.we)("#EventModTile_Stats_VoteUp", e.nVotesUp),
            ),
            u.createElement(
              "div",
              null,
              (0, f.we)("#EventModTile_Stats_VoteDown", e.nVotesDown),
            ),
            Boolean(t) &&
              u.createElement(
                "div",
                { className: Re.ArtHeader },
                (0, f.we)("#EventModTile_ImageAnalysis_Header", t),
                " ",
              ),
            Boolean(n) &&
              u.createElement(
                "div",
                null,
                (0, f.we)("#EventModTile_ImageAnalysis_Capsule", n),
                " ",
              ),
            Boolean(a) &&
              u.createElement(
                "div",
                { className: Re.ArtSpotlight },
                (0, f.we)("#EventModTile_ImageAnalysis_Spotlight", a),
                " ",
              ),
            Boolean(r) &&
              u.createElement(
                "div",
                null,
                (0, f.we)("#EventModTile_ImageAnalysis_Broadcast", r),
                " ",
              ),
            0 == s &&
              u.createElement(
                "div",
                { className: Re.AnalysisMissing },
                (0, f.we)("#EventModTile_ImageAnalysis_None"),
                " ",
              ),
            0 == this.state.nLocLanguages &&
              u.createElement(C.t, {
                size: "small",
                string: (0, f.we)("#EventModTile_LoadingLocs"),
              }),
            this.state.nLocLanguages > 0 &&
              u.createElement(
                "div",
                null,
                (0, f.we)("#EventModTile_Languages", this.state.nLocLanguages),
              ),
            Boolean(i) &&
              u.createElement(
                "div",
                null,
                (0, f.we)("#EventModTile_Languages_Summary", i),
                " ",
              ),
            Boolean(o) &&
              u.createElement(
                "div",
                null,
                (0, f.we)("#EventModTile_Languages_Subtitle", o),
                " ",
              ),
          );
        }
      };
      He = (0, O.Cg)([m.PA], He);
      const Ne = (0, m.PA)((e) => {
        const [t, n] = (0, u.useState)(!ue.A.Get().BHasApp(e.appid)),
          a = u.useRef(o().CancelToken.source());
        if (
          ((0, u.useEffect)(
            () => () =>
              a.current.cancel(
                "EventModerationChannelInfo component unmounted",
              ),
            [],
          ),
          (0, u.useEffect)(() => {
            const { appid: t, clanSteamID: r } = e;
            if (
              (t && !ue.A.Get().BHasApp(t)) ||
              (r && !_.ac.BHasClanInfoLoaded(r))
            ) {
              (async () => {
                try {
                  await Promise.all([
                    ue.A.Get().QueueAppRequest(t, {
                      include_assets: !0,
                      include_release: !0,
                      include_screenshots: !0,
                    }),
                    r ? _.ac.LoadClanInfoForClanSteamID(r) : void 0,
                  ]);
                } catch (e) {
                  const t = (0, l.H)(e);
                  console.error(
                    "EventModerationChannelInfo: App Load: " + t.strErrorMsg,
                    t,
                  );
                } finally {
                  a.current.token.reason || n(!1);
                }
              })();
            }
          }, [e]),
          t)
        )
          return u.createElement(C.t, {
            size: "small",
            string: (0, f.we)("#EventModTile_AppInfoLoading"),
          });
        const { appid: r, clanSteamID: i } = e;
        if (r) {
          const e = ue.A.Get().GetApp(r);
          return e
            ? u.createElement(
                "div",
                { className: Re.TileAppInfo },
                u.createElement(
                  "div",
                  { className: Re.TileAppInfoTitle },
                  u.createElement(
                    Me.j,
                    { type: "app", id: e.GetAppID() },
                    u.createElement(
                      ye.uU,
                      { href: (0, fe.k2)(e.GetStorePageURL()) },
                      u.createElement("img", {
                        className: Re.TileAppInfoImage,
                        src: e.GetAssets().GetMainCapsuleURL(),
                      }),
                    ),
                  ),
                  u.createElement(
                    Me.j,
                    { type: "app", id: e.GetAppID() },
                    u.createElement(
                      ye.uU,
                      { href: (0, fe.k2)(e.GetStorePageURL()) },
                      u.createElement("div", null, e.GetName()),
                    ),
                  ),
                ),
              )
            : null;
        }
        if (i) {
          const e = i.GetAccountID(),
            t = _.ac.GetClanInfoByClanAccountID(e);
          if (t && t.is_curator)
            return u.createElement(
              "div",
              { className: Re.TileAppInfo },
              u.createElement(
                "div",
                { className: Re.TileAppInfoTitle },
                u.createElement(
                  ye.uU,
                  {
                    href: (0, fe.k2)(
                      s.TS.STORE_BASE_URL + "/curator/" + e + "/",
                    ),
                  },
                  u.createElement("img", {
                    className: Re.TileAppInfoImage,
                    src: t.avatar_full_url,
                  }),
                  u.createElement(
                    "div",
                    null,
                    (0, f.we)("#EventModTile_CuratorName", t.group_name),
                  ),
                ),
              ),
            );
        }
        return null;
      });
      let ze = class extends u.Component {
        render() {
          const { event: e, hidden: t, published: n } = this.props,
            a = t
              ? n
                ? (0, f.we)("#EVentModTile_State_Staged")
                : (0, f.we)("#EVentModTile_State_Draft")
              : (0, f.we)("#EVentModTile_State_Published"),
            r = (0, ae.iy)(e),
            s = (0, ae.A4)(e),
            i = (0, ae.ZA)(e);
          let o = i && !e.BHasTag("hide_store") && !e.BHasTag("mod_hide_store"),
            l =
              r &&
              !e.BHasTag("hide_library_overview") &&
              !e.BHasTag("mod_hide_library_overview"),
            c =
              s &&
              !e.BHasTag("hide_library_detail") &&
              !e.BHasTag("mod_hide_library_detail");
          return u.createElement(
            "div",
            { className: Re.VisibiltyCtn },
            u.createElement("div", { className: Re.TileTitle }, a),
            u.createElement(
              "div",
              null,
              (0, f.we)(
                "#EventModTile_Store_Visibility",
                o
                  ? (0, f.we)("#WriteReview_Dialog_Yes")
                  : (0, f.we)("#WriteReview_Dialog_No"),
                o
                  ? ""
                  : i
                    ? (0, f.we)(
                        "#EventModTime_Hidden_EventType",
                        e.GetEventTypeAsString(),
                      )
                    : e.BHasTag("hide_store")
                      ? (0, f.we)("#EventModTime_Hidden_OptOut")
                      : (0, f.we)("#EventModTime_Hidden_Moderator"),
              ),
            ),
            u.createElement(
              "div",
              null,
              (0, f.we)(
                "#EventModTile_LibraryHome_Visibility",
                l
                  ? (0, f.we)("#WriteReview_Dialog_Yes")
                  : (0, f.we)("#WriteReview_Dialog_No"),
                l
                  ? ""
                  : i
                    ? (0, f.we)(
                        "#EventModTime_Hidden_EventType",
                        e.GetEventTypeAsString(),
                      )
                    : e.BHasTag("hide_library_overview")
                      ? (0, f.we)("#EventModTime_Hidden_OptOut")
                      : (0, f.we)("#EventModTime_Hidden_Moderator"),
              ),
            ),
            u.createElement(
              "div",
              null,
              (0, f.we)(
                "#EventModTile_LibraryDetail_Visibility",
                c
                  ? (0, f.we)("#WriteReview_Dialog_Yes")
                  : (0, f.we)("#WriteReview_Dialog_No"),
                c
                  ? ""
                  : i
                    ? (0, f.we)(
                        "#EventModTime_Hidden_EventType",
                        e.GetEventTypeAsString(),
                      )
                    : e.BHasTag("hide_library_detail")
                      ? (0, f.we)("#EventModTime_Hidden_OptOut")
                      : (0, f.we)("#EventModTime_Hidden_Moderator"),
              ),
            ),
            e.BHasTag("enable_steam_china") &&
              u.createElement(
                "div",
                null,
                (0, f.we)("#EventModTile_SteamChina_Visibility"),
              ),
            e.BHasTag("disable_steam_global") &&
              u.createElement(
                "div",
                null,
                (0, f.we)("#EventModTile_SteamGlobal_Hidden"),
              ),
          );
        }
      };
      ze = (0, O.Cg)([m.PA], ze);
      let qe = class extends u.Component {
        state = {
          bUpdating: !1,
          newCategoryOption: {
            label: (0, re.rG)(34),
            value: { eventType: 34 },
          },
        };
        m_cancelSignal = o().CancelToken.source();
        componentWillUnmount() {
          this.m_cancelSignal.cancel(
            "ChangeEventTypeDialog component unmounted",
          );
        }
        async ChangeCategoryForEvent() {
          const { eventModel: e, closeModal: t } = this.props;
          try {
            const n = this.state.newCategoryOption,
              a = n.value.eventType;
            await me
              .Get()
              .UpdatePartnerEventType(
                this.m_cancelSignal,
                e.clanSteamID,
                e.GID,
                a,
              );
            const r = ae.Ac,
              s = [];
            n.value.tags &&
              n.value.tags.forEach((e) => {
                s.push(e);
                const t = new de().SetUpdateSeasonalTags(e).ToModString();
                s.push(t);
              });
            const i = await me
              .Get()
              .UpdateTagsOnPartnerEvent(
                this.m_cancelSignal,
                e.clanSteamID,
                e.GetAnnouncementGID(),
                s,
                r,
                new de().SetActionChangeEvent(a),
              );
            (0, z.h5)(() => {
              (e.type = a), (e.vecTags = i);
            }),
              this.setState({ bUpdating: !1 }, t);
          } catch (e) {
            const t = (0, l.H)(e);
            console.error("ChangeEventTypeDialog error " + t.strErrorMsg, t),
              this.setState({ bUpdating: !1, strErrorMsg: t.strErrorMsg });
          }
        }
        OnChangeSelection(e) {
          this.setState({ newCategoryOption: e });
        }
        render() {
          const { eventModel: e, closeModal: t } = this.props,
            n = ne.Zi.filter((e) => 1 == e || 4 == e || e >= 9).map((e) => {
              const t = { eventType: e };
              return (
                12 == e && (t.tags = ["patchnotes"]),
                { label: (0, re.rG)(e), value: t }
              );
            });
          n.push({
            label: (0, f.we)("#PartnerEvent_Curator_Group_Members"),
            value: {
              eventType: 28,
              tags: ["curator", "curator_group_members"],
            },
          }),
            n.push({
              label: (0, f.we)("#PartnerEvent_Curator_Public"),
              value: { eventType: 28, tags: ["curator", "curator_public"] },
            }),
            n.push({
              label: (0, f.we)("#PartnerEvent_SteamAwardNominations"),
              value: {
                eventType: 28,
                tags: [
                  "steam_award_nomination_request",
                  "mod_hide_library_overview",
                ],
              },
            }),
            n.push({
              label: (0, f.we)("#PartnerEvent_SteamAwardVoteRequest"),
              value: {
                eventType: 28,
                tags: ["steam_award_vote_request", "mod_hide_library_overview"],
              },
            });
          const a = [
              {
                value: { eventType: 15, tags: ["halloween"] },
                label: "Halloween: " + (0, f.we)("#PartnerEvent_15"),
              },
              {
                value: { eventType: 22, tags: ["halloween"] },
                label: "Halloween: " + (0, f.we)("#PartnerEvent_22"),
              },
              {
                value: { eventType: 23, tags: ["halloween"] },
                label: "Halloween: " + (0, f.we)("#PartnerEvent_23"),
              },
              {
                value: { eventType: 24, tags: ["halloween"] },
                label: "Halloween: " + (0, f.we)("#PartnerEvent_24"),
              },
              {
                value: { eventType: 35, tags: ["halloween"] },
                label: "Halloween: " + (0, f.we)("#PartnerEvent_35"),
              },
            ],
            r = Te.HD.GetTimeNowWithOverrideAsDate();
          return (
            8 == r.getMonth() || 9 == r.getMonth()
              ? n.unshift(...a)
              : n.push(...a),
            u.createElement(
              B.o0,
              {
                strTitle: (0, f.we)("#EventModTile_ChangeEventType"),
                strDescription: (0, f.we)(
                  "#EventModTile_ChangeEventType_Desc",
                  e.GetEventTypeAsString(),
                ),
                onCancel: t,
                onOK: () =>
                  this.setState({ bUpdating: !0 }, this.ChangeCategoryForEvent),
              },
              u.createElement(
                u.Fragment,
                null,
                u.createElement(
                  "div",
                  { className: Re.CategoryChangeDialog },
                  u.createElement("br", null),
                  this.state.bUpdating &&
                    u.createElement(C.t, { size: "small" }),
                  this.state.strErrorMsg &&
                    u.createElement(
                      "div",
                      null,
                      (0, f.we)("#Chat_Settings_Error_ServerError"),
                      u.createElement("br", null),
                      this.state.strErrorMsg,
                    ),
                  u.createElement(te.Ay, {
                    isSearchable: !0,
                    onChange: this.OnChangeSelection,
                    value: this.state.newCategoryOption,
                    options: n,
                  }),
                ),
              ),
            )
          );
        }
      };
      (0, O.Cg)([N.oI], qe.prototype, "ChangeCategoryForEvent", null),
        (0, O.Cg)([N.oI], qe.prototype, "OnChangeSelection", null),
        (qe = (0, O.Cg)([m.PA], qe));
      class xe extends u.Component {
        state = {
          bUpdating: !1,
          bAccept: this.props.eventModel.BHasTag("halloween2019"),
          bHorror: this.props.eventModel.BHasTag("horror"),
          bCute: this.props.eventModel.BHasTag("cute"),
        };
        m_cancelSignal = o().CancelToken.source();
        componentWillUnmount() {
          this.m_cancelSignal.cancel(
            "UpdateSeasonalTagDialog component unmounted",
          );
        }
        ChangeAcceptance() {
          this.setState({ bAccept: !this.state.bAccept });
        }
        ChangeHorror() {
          this.setState({ bHorror: !this.state.bHorror });
        }
        ChangeCute() {
          this.setState({ bCute: !this.state.bCute });
        }
        async ApplyAction() {
          let e = new Array(),
            t = new Array();
          this.state.bAccept
            ? (e.push("halloween2019"), t.push("halloween2019reviewed"))
            : (t.push("halloween2019"), e.push("halloween2019reviewed")),
            this.state.bCute ? e.push("cute") : t.push("cute"),
            this.state.bHorror ? e.push("horror") : t.push("horror");
          try {
            const { eventModel: n } = this.props;
            let a = await me
              .Get()
              .UpdateTagsOnPartnerEvent(
                this.m_cancelSignal,
                n.clanSteamID,
                n.AnnouncementGID,
                e,
                t,
                new de().SetUpdateSeasonalTags(
                  this.state.bAccept
                    ? "halloween2019"
                    : "halloween2019reviewed",
                ),
              );
            (n.vecTags = a), this.props.closeModal();
          } catch (e) {
            let t = (0, l.H)(e);
            console.error("EventModerationTile " + t.strErrorMsg, t),
              this.setState({ strErrorMsg: t.strErrorMsg });
          }
        }
        render() {
          const { eventModel: e, closeModal: t } = this.props;
          return u.createElement(
            B.o0,
            {
              strTitle: (0, f.we)("#EventModTile_SeasonalTag"),
              onCancel: t,
              onOK: () => this.setState({ bUpdating: !0 }, this.ApplyAction),
            },
            u.createElement(
              u.Fragment,
              null,
              u.createElement(
                "div",
                { className: Re.CategoryChangeDialog },
                u.createElement("input", {
                  id: "Acceptance",
                  type: "checkbox",
                  checked: this.state.bAccept,
                  onChange: this.ChangeAcceptance,
                }),
                u.createElement(
                  "label",
                  { htmlFor: "Acceptance" },
                  (0, f.we)("#EventModTile_SeasonalTag_Desc"),
                ),
                u.createElement(
                  "div",
                  null,
                  (0, f.we)("#EventModTile_SeasonalTag_Desc_Secondary"),
                ),
                u.createElement("input", {
                  id: "Horror",
                  type: "checkbox",
                  checked: this.state.bHorror,
                  onChange: this.ChangeHorror,
                }),
                u.createElement("label", { htmlFor: "Horror" }, "Horror Tag"),
                u.createElement("input", {
                  id: "Cute",
                  type: "checkbox",
                  checked: this.state.bCute,
                  onChange: this.ChangeCute,
                }),
                u.createElement("label", { htmlFor: "Cute" }, "Cute Tag"),
                this.state.bUpdating && u.createElement(C.t, { size: "small" }),
                this.state.strErrorMsg &&
                  u.createElement(
                    "div",
                    null,
                    (0, f.we)("#Chat_Settings_Error_ServerError"),
                    u.createElement("br", null),
                    this.state.strErrorMsg,
                  ),
              ),
            ),
          );
        }
      }
      (0, O.Cg)([N.oI], xe.prototype, "ChangeAcceptance", null),
        (0, O.Cg)([N.oI], xe.prototype, "ChangeHorror", null),
        (0, O.Cg)([N.oI], xe.prototype, "ChangeCute", null),
        (0, O.Cg)([N.oI], xe.prototype, "ApplyAction", null);
      let je = class extends u.Component {
        state = { bLoadingEvent: !0 };
        m_cancelSignal = o().CancelToken.source();
        componentWillUnmount() {
          this.m_cancelSignal.cancel("SteamGameFestivalStoreDebug to unload ");
        }
        async componentDidMount() {
          const { clanEventGID: e, clanAccountID: t } = this.props;
          if (
            (console.log(e, t, typeof e, typeof t),
            e && !H.O3.BHasClanEventModel(e))
          ) {
            let n = g.b.InitFromClanID(Number.parseInt(t)),
              a = await H.O3.LoadPartnerEventFromClanEventGIDAndClanSteamID(
                n,
                e,
                0,
              ),
              r = new Array(),
              s = new Array();
            if (a.BHasSaleEnabled()) {
              this.setState({
                event: a,
                bLoadingEvent: !1,
                bLoadingApps: !0,
                bLoadingDemos: !0,
                bLoadingAssociatedDemoInfo: !0,
              });
              let e = new Map();
              a.jsondata.sale_sections.forEach((t) => {
                "tabs" == t.section_type &&
                  t.tabs.forEach((t) => {
                    t.capsules.forEach((t) => {
                      "game" == t.type ||
                      "application" == t.type ||
                      "software" == t.type
                        ? e.has(t.id) || (e.set(t.id, !0), r.push(t.id))
                        : e.has(t.id) || (e.set(t.id, !0), s.push(t.id));
                    });
                  });
              });
              const t = {
                include_assets: !0,
                include_screenshots: !0,
                include_release: !0,
              };
              await ue.A.Get().QueueMultipleAppRequests(r, t),
                this.setState({
                  rgAppIDs: r,
                  rgUnknownTypeAppIDs: s,
                  bLoadingApps: !1,
                }),
                await ue.A.Get().QueueMultipleAppRequests(r, t),
                this.setState({ bLoadingAssociatedDemoInfo: !1 });
              const n = r.flatMap(
                (e) => ue.A.Get().GetApp(e)?.GetDemoAppIDs() ?? [],
              );
              await ue.A.Get().QueueMultipleAppRequests(n, t),
                this.setState({ bLoadingDemos: !1 });
            } else this.setState({ bLoadingEvent: !1, rgAppIDs: r });
          } else this.setState({ bLoadingEvent: !1 });
        }
        render() {
          if (
            this.state.bLoadingEvent ||
            this.state.bLoadingDemos ||
            this.state.bLoadingApps ||
            this.state.bLoadingAssociatedDemoInfo
          )
            return u.createElement(C.t, {
              string:
                (0, f.we)("#Loading") +
                (this.state.bLoadingEvent
                  ? " Events"
                  : this.state.bLoadingApps
                    ? " Apps"
                    : this.state.bLoadingAssociatedDemoInfo
                      ? " Associated Demo Info"
                      : this.state.bLoadingDemos
                        ? " Demos"
                        : "done"),
              position: "center",
            });
          if (!this.state.event)
            return u.createElement("div", null, " Failed to load event");
          const { event: e } = this.state;
          if (!e.jsondata.bSaleEnabled)
            return u.createElement("div", null, "Not a sale event");
          let t = new Array(),
            n = new Array();
          this.state.rgAppIDs
            .filter((e) => !ue.A.Get().GetApp(e))
            .forEach((e) => {
              t.push(
                u.createElement(
                  "div",
                  { key: "missing: " + e },
                  u.createElement(
                    "a",
                    {
                      href: s.TS.STORE_BASE_URL + "app/" + e + "/?beta=1",
                      target: "_blank",
                    },
                    e,
                  ),
                ),
              ),
                n.push(e);
            });
          const a = this.state.rgAppIDs.reduce(
              (e, t) => e + (ue.A.Get().GetApp(t)?.BHasDemo() ? 1 : 0),
              0,
            ),
            r = new Array();
          this.state.rgAppIDs.forEach((e) => {
            const t = ue.A.Get().GetApp(e);
            if (t && !t.BHasDemo()) {
              let t = ue.A.Get().GetApp(e);
              r.push(
                u.createElement(
                  "div",
                  { key: "missingdemo_" + e },
                  1 == t?.GetAppType() &&
                    u.createElement(
                      "b",
                      null,
                      "--Error: Sale Page has Demo AppID, based game -- ",
                    ),
                  t?.GetName(),
                  " (",
                  e,
                  ")",
                  u.createElement(
                    "a",
                    {
                      href: (0, fe.k2)(t.GetStorePageURL() + "?beta=0"),
                      target: "_blank",
                    },
                    "Store Page",
                  ),
                  " ",
                  u.createElement(
                    "a",
                    {
                      href: s.TS.PARTNER_BASE_URL + "apps/landing/" + e,
                      target: "_blank",
                    },
                    "App Landing Page",
                  ),
                ),
              );
            }
          });
          let i = 0,
            o = 0;
          this.state.rgAppIDs.forEach((e) => {
            let t = !1;
            const n = ue.A.Get().GetApp(e);
            if (n && n.BHasDemo()) {
              ue.A.Get().GetApp(n.GetDemoAppIDs()[0]).BIsComingSoon()
                ? ((i += 1), (t = !0))
                : (o += 1);
            }
          });
          let l = new Array(),
            c = 0;
          return (
            this.state.rgAppIDs.forEach((e) => {
              const t = ue.A.Get().GetApp(e);
              1 != t?.GetAppType() && (c += 1);
            }),
            u.createElement(
              v.tH,
              null,
              u.createElement(
                "h1",
                null,
                e.GetNameWithFallback((0, ne.sf)(s.TS.LANGUAGE)),
              ),
              u.createElement(
                "div",
                null,
                u.createElement("b", null, "Unique AppIDs:"),
                " ",
                this.state.rgAppIDs.length,
                " ",
              ),
              u.createElement(
                "div",
                null,
                u.createElement(
                  "b",
                  null,
                  "Visible Apps in ",
                  s.TS.COUNTRY,
                  ":",
                ),
                " ",
                c,
              ),
              u.createElement(
                "div",
                null,
                u.createElement("b", null, "Unknown AppID types:"),
                " ",
                this.state.rgUnknownTypeAppIDs.length,
              ),
              u.createElement(
                "div",
                null,
                u.createElement("b", null, "Missing AppIDs:"),
                " ",
                " ",
              ),
              u.createElement(
                "div",
                null,
                u.createElement("b", null, "Demos:"),
                " ",
                a,
              ),
              u.createElement(
                "div",
                null,
                u.createElement("b", null, "Visible apps missing demo store:"),
                " ",
                r.length,
              ),
              u.createElement(
                "div",
                null,
                u.createElement("b", null, "CApplications Loaded:"),
                " ",
                " ",
              ),
              u.createElement(
                "div",
                null,
                u.createElement(
                  "b",
                  null,
                  "CApplication with Associated Demos:",
                ),
                " ",
                0,
              ),
              u.createElement(
                "div",
                null,
                u.createElement(
                  "b",
                  null,
                  "  Associated with store page but not released: ",
                ),
                " ",
                0,
              ),
              u.createElement(
                "div",
                null,
                u.createElement(
                  "b",
                  null,
                  "CApplication with demo without association:",
                ),
                " ",
                0,
              ),
              u.createElement(
                "div",
                null,
                u.createElement(
                  "b",
                  null,
                  "  Released but not associated with store page: ",
                ),
                " ",
                0,
              ),
              u.createElement(
                "div",
                null,
                u.createElement("b", null, "CApplication missing:"),
                " ",
              ),
              u.createElement(
                "div",
                null,
                u.createElement(
                  "b",
                  null,
                  "CApplication without demo store and demo associations:",
                ),
                " ",
              ),
              u.createElement(
                "div",
                null,
                u.createElement("b", null, "Released Demo: "),
                o,
              ),
              u.createElement(
                "div",
                null,
                u.createElement("b", null, "Unreleased Demo: "),
                i,
              ),
              u.createElement("hr", null),
              u.createElement("h2", null, "Missing Appids:"),
              t,
              u.createElement(
                "h2",
                null,
                "Missing BOTH demo list and associated demo on product page:",
              ),
              l,
              u.createElement(
                "h2",
                null,
                "Missing Demos for Visible Appids via Demo Store (missing in link on Sale Page):",
              ),
              r,
            )
          );
        }
      };
      je = (0, O.Cg)([m.PA], je);
      var We = n(72034),
        Ve = n(44332),
        Ye = n(7338);
      function Qe(e) {
        const [t, n] = (0, u.useState)(!1),
          [a] = (0, u.useState)(() =>
            (function () {
              const e = (0, s.Tc)(
                "partnerbrowse_webapi_token",
                "application_config",
              );
              (0, Ve.w)(Boolean(e), "require partnerbrowse_webapi_token");
              const t = new We.D(s.TS.WEBAPI_BASE_URL, e);
              ("dev" != s.TS.WEB_UNIVERSE && "beta" != s.TS.WEB_UNIVERSE) ||
                console.log(
                  "DEV_DEBUG: Initializing CStoreItemCache with access token",
                  e,
                );
              return t;
            })(),
          ),
          r = (0, u.useMemo)(
            () => ({
              country: s.TS.COUNTRY,
              language: s.TS.LANGUAGE,
              realm: s.TS.EREALM,
              bUsePartnerAPI: !0,
            }),
            [],
          );
        return (
          (0, u.useEffect)(
            () => (
              n(!0),
              (function (e) {
                return ue.A.Initialize(
                  e.GetServiceTransport(),
                  s.iA.is_partner_member,
                );
              })(a)
            ),
            [a],
          ),
          t
            ? (0, u.createElement)(Ye.V3, {
                context: r,
                serviceTransportOverride: a.GetServiceTransport(),
                children: e.children,
              })
            : null
        );
      }
      var Ke = n(81881);
      const Xe = () =>
        u.createElement(
          Qe,
          null,
          u.createElement(
            Ke.d,
            null,
            u.createElement(
              p.dO,
              null,
              u.createElement(p.qh, {
                path: a.B.EventGameFestivalDebug(),
                render: (e) =>
                  u.createElement(je, {
                    ...e,
                    clanAccountID: e.match.params.clanacountid,
                    clanEventGID: e.match.params.claneventgid,
                  }),
              }),
              u.createElement(p.qh, {
                exact: !0,
                path: a.B.EventBackfill(),
                render: (e) => u.createElement(J, { ...e }),
              }),
              u.createElement(p.qh, {
                path: a.B.EventRSSModeration(),
                render: (e) => u.createElement(I, { ...e }),
              }),
              u.createElement(p.qh, {
                path: a.B.EventModeration(),
                render: (e) =>
                  u.createElement(De, {
                    ...e,
                    appid:
                      e.match.params.appid &&
                      Number.parseInt(e.match.params.appid),
                  }),
              }),
            ),
          ),
        );
    },
  },
]);
